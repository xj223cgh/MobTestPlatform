/* empty css                  */import{E as e,a as r}from"./el-input-320f57dc.js";import{E as a}from"./el-checkbox-b9bd0a97.js";import{E as l}from"./el-link-a4b32e17.js";import{u as s,r as o,b as t,c as n,d as i,e as u,f as m,w as p,g as d,i as g,j as c,n as f,p as h,k as b,l as v}from"./index-ea26c5b6.js";import{_}from"./_plugin-vue_export-helper-1b428a4d.js";import"./castArray-7303869c.js";import"./omit-2fc30497.js";const y={class:"register-container"},w={class:"register-card"},V={class:"agreement-options"},k={class:"login-link"},x=_({__name:"Register",setup(_){const x=s(),j=o(null),U=o(!1),z=t({username:"",phone:"",realName:"",password:"",agreement:!1}),E={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的手机号",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度在 2 到 20 个字符",trigger:"blur"}],password:[{validator:(e,r,a)=>{""===r?a(new Error("请输入密码")):r.length<6?a(new Error("密码长度不能少于 6 个字符")):a()},trigger:"blur"}],agreement:[{required:!0,message:"请同意用户协议和隐私政策",trigger:"change"}]},N=async()=>{var e,r;if(j.value)if(z.agreement)try{await j.value.validate(),U.value=!0;const e=await h({username:z.username,phone:z.phone,real_name:z.realName,password:z.password});200===e.code?(f.success("注册成功，请登录"),x.push("/login")):f.error(e.message||"注册失败")}catch(a){console.error("注册失败:",a),"Error"!==a.name&&f.error((null==(r=null==(e=a.response)?void 0:e.data)?void 0:r.message)||"注册失败，请稍后重试")}finally{U.value=!1}else f.warning("请阅读并同意用户协议和隐私政策")},q=()=>{x.push("/login")},C=()=>{f.info("用户协议页面待完善")},A=()=>{f.info("隐私政策页面待完善")};return(s,o)=>{const t=b,f=r,h=l,_=a,x=v,K=e;return n(),i("div",y,[u("div",w,[o[11]||(o[11]=u("div",{class:"register-header"},[u("h1",null,"用户注册"),u("p",{class:"register-subtitle"},"Mobile Test Platform")],-1)),m(K,{ref_key:"registerFormRef",ref:j,model:z,rules:E,class:"register-form",onSubmit:d(N,["prevent"])},{default:p(()=>[m(f,{prop:"username"},{default:p(()=>[m(t,{modelValue:z.username,"onUpdate:modelValue":o[0]||(o[0]=e=>z.username=e),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),m(f,{prop:"phone"},{default:p(()=>[m(t,{modelValue:z.phone,"onUpdate:modelValue":o[1]||(o[1]=e=>z.phone=e),placeholder:"请输入手机号",size:"large","prefix-icon":"Phone",clearable:""},null,8,["modelValue"])]),_:1}),m(f,{prop:"realName"},{default:p(()=>[m(t,{modelValue:z.realName,"onUpdate:modelValue":o[2]||(o[2]=e=>z.realName=e),placeholder:"请输入真实姓名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),m(f,{prop:"password"},{default:p(()=>[m(t,{modelValue:z.password,"onUpdate:modelValue":o[3]||(o[3]=e=>z.password=e),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",clearable:"",onKeyup:g(N,["enter"])},null,8,["modelValue"])]),_:1}),m(f,{prop:"agreement"},{default:p(()=>[u("div",V,[m(_,{modelValue:z.agreement,"onUpdate:modelValue":o[4]||(o[4]=e=>z.agreement=e)},{default:p(()=>[o[7]||(o[7]=c(" 我已阅读并同意 ",-1)),m(h,{type:"primary",onClick:C,style:{"vertical-align":"baseline"}},{default:p(()=>[...o[5]||(o[5]=[c("《用户协议》",-1)])]),_:1}),o[8]||(o[8]=c(" 和 ",-1)),m(h,{type:"primary",onClick:A,style:{"vertical-align":"baseline"}},{default:p(()=>[...o[6]||(o[6]=[c("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),m(f,null,{default:p(()=>[m(x,{type:"primary",size:"large",loading:U.value,class:"register-btn",onClick:N,onKeyup:g(N,["enter"])},{default:p(()=>[...o[9]||(o[9]=[c(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),u("div",k,[m(h,{type:"primary",onClick:q},{default:p(()=>[...o[10]||(o[10]=[c("已有账号？立即登录",-1)])]),_:1})])]),_:1},8,["model"])]),o[12]||(o[12]=u("div",{class:"register-footer"},[u("p",null,"© 2025 移动测试平台. All rights reserved.")],-1))])}}},[["__scopeId","data-v-f3a62b87"]]);export{x as default};
