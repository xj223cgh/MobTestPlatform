import{aF as e,dg as a,o as t,z as l,a3 as s,af as n,bY as o,dh as r,x as u,G as i,ab as d,I as v,Y as c,B as b,r as p,a1 as f,a9 as m,ae as h,a2 as g,c as y,d as x,F as C,h as w,aU as N,_ as P,a0 as $,di as R,dj as E,W as k,dk as T,b3 as B,f as S,E as F,q as A,$ as V,at as j,O as L,P as _,H as K,C as W,D as z,aB as M,aK as O,a4 as Y,aL as q,bV as H,dc as I,b as D,dl as U,a5 as X,a6 as G,aq as J,M as Q,N as Z}from"./index-ea26c5b6.js";import{c as ee,r as ae}from"./raf-45c3df72.js";import{a as te,c as le}from"./strings-836bc6fd.js";import{o as se}from"./omit-2fc30497.js";const ne=(r,u)=>{const i=e({}),d=e([]),v=new WeakMap,c=()=>{d.value=((e,a,t)=>n(e.subTree).filter(e=>{var t;return o(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component}).map(e=>e.component.uid).map(e=>t[e]).filter(e=>!!e))(r,u,i.value)},b=e=>e.render(),p=l({setup:(e,{slots:a})=>()=>(c(),a.default?s(b,{render:a.default}):null)});return{children:d,addChild:e=>{i.value[e.uid]=e,a(i),t(()=>{const t=e.getVnode().el,l=t.parentNode;if(!v.has(l)){v.set(l,[]);const e=l.insertBefore.bind(l);l.insertBefore=(t,s)=>(v.get(l).some(e=>t===e||s===e)&&a(i),e(t,s))}v.get(l).push(t)})},removeChild:e=>{delete i.value[e.uid],a(i);const t=e.getVnode().el,l=t.parentNode,s=v.get(l),n=s.indexOf(t);s.splice(n,1)},ChildrenSorter:p}},oe="horizontal",re="vertical",ue={[oe]:"deltaX",[re]:"deltaY"},ie=Symbol("tabsRootContextKey"),de=u({tabs:{type:i(Array),default:()=>d([])},tabRefs:{type:i(Object),default:()=>d({})}}),ve="ElTabBar",ce=l({name:ve});var be=P(l({...ce,props:de,setup(e,{expose:a}){const t=e,l=v(ie);l||c(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=b("tabs"),n=p(),o=p(),r=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if($(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${te(o)}`],a=n[`client${te(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${te(n)}(${e}px)`}})(),u=[];f(()=>t.tabs,async()=>{await m(),r(),u.forEach(e=>e.stop()),u.length=0,Object.values(t.tabRefs).forEach(e=>{u.push(h(e,r))})},{immediate:!0});const i=h(n,()=>r());return g(()=>{u.forEach(e=>e.stop()),u.length=0,i.stop()}),a({ref:n,update:r}),(e,a)=>(y(),x("div",{ref_key:"barRef",ref:n,class:C([w(s).e("active-bar"),w(s).is(w(l).props.tabPosition)]),style:N(o.value)},null,6))}}),[["__file","tab-bar.vue"]]);const pe=u({panes:{type:i(Array),default:()=>d([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),fe="ElTabNav",me=l({name:fe,props:pe,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(l,{expose:s,emit:n}){const o=v(ie);o||c(fe,"<el-tabs><tab-nav /></el-tabs>");const u=b("tabs"),i=R(),d=E(),g=p(),y=p(),x=p(),C=p({}),w=p(),N=p(!1),P=p(0),$=p(!1),K=p(!0),W=e(),z=k(()=>["top","bottom"].includes(o.props.tabPosition)),M=k(()=>z.value?"width":"height"),O=k(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${P.value}px)`})),{width:Y,height:q}=T(g),{width:H,height:I}=T(y,{width:0,height:0},{box:"border-box"}),D=k(()=>z.value?Y.value:q.value),U=k(()=>z.value?H.value:I.value),{onWheel:X}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let s,n=0;const o=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:o,onWheel:e=>{ee(s);const a=e[ue[t.value]];o(n)&&o(n+a)||(n+=a,r()||e.preventDefault(),s=ae(()=>{l(n),n=0}))}}})({atStartEdge:k(()=>P.value<=0),atEndEdge:k(()=>U.value-P.value<=D.value),layout:k(()=>z.value?"horizontal":"vertical")},e=>{P.value=le(P.value+e,0,U.value-D.value)}),G=()=>{if(!g.value)return;const e=g.value[`offset${te(M.value)}`],a=P.value;if(!a)return;const t=a>e?a-e:0;P.value=t},J=()=>{if(!g.value||!y.value)return;const e=y.value[`offset${te(M.value)}`],a=g.value[`offset${te(M.value)}`],t=P.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;P.value=l},Q=async()=>{const e=y.value;if(!(N.value&&x.value&&g.value&&e))return;await m();const a=C.value[l.currentName];if(!a)return;const t=g.value,s=a.getBoundingClientRect(),n=t.getBoundingClientRect(),o=z.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=P.value;let u=r;z.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),P.value=Math.min(u,o)},Z=()=>{var e;if(!y.value||!g.value)return;l.stretch&&(null==(e=w.value)||e.update());const a=y.value[`offset${te(M.value)}`],t=g.value[`offset${te(M.value)}`],s=P.value;t<a?(N.value=N.value||{},N.value.prev=s,N.value.next=s+t<a,a-s<t&&(P.value=a-t)):(N.value=!1,s>0&&(P.value=0))},se=e=>{let a=0;switch(L(e)){case _.left:case _.up:a=-1;break;case _.right:case _.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{K.value&&($.value=!0)},oe=()=>$.value=!1;return f(i,e=>{"hidden"===e?K.value=!1:"visible"===e&&setTimeout(()=>K.value=!0,50)}),f(d,e=>{e?setTimeout(()=>K.value=!0,50):K.value=!1}),h(x,Z),t(()=>setTimeout(()=>Q(),0)),B(()=>Z()),s({scrollToActiveTab:Q,removeFocus:oe,focusActiveTab:async()=>{await m();const e=C.value[l.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:y,tabBarRef:w,scheduleRender:()=>a(W)}),()=>{const e=N.value?[S("span",{class:[u.e("nav-prev"),u.is("disabled",!N.value.prev)],onClick:G},[S(F,null,{default:()=>[S(A,null,null)]})]),S("span",{class:[u.e("nav-next"),u.is("disabled",!N.value.next)],onClick:J},[S(F,null,{default:()=>[S(V,null,null)]})])]:null,a=l.panes.map((e,a)=>{var t,s,r,i,d;const v=e.uid,c=e.props.disabled,b=null!=(s=null!=(t=e.props.name)?t:e.index)?s:`${a}`,p=!c&&(e.isClosable||!1!==e.props.closable&&l.editable);e.index=`${a}`;const f=p?S(F,{class:"is-icon-close",onClick:a=>n("tabRemove",e,a)},{default:()=>[S(j,null,null)]}):null,m=(null==(i=(r=e.slots).label)?void 0:i.call(r))||e.props.label,h=!c&&e.active?null!=(d=l.tabindex)?d:o.props.tabindex:-1;return S("div",{ref:e=>((e,a)=>{C.value[a]=e})(e,b),class:[u.e("item"),u.is(o.props.tabPosition),u.is("active",e.active),u.is("disabled",c),u.is("closable",p),u.is("focus",$.value)],id:`tab-${b}`,key:`tab-${v}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":e.active,tabindex:h,onFocus:()=>ne(),onBlur:()=>oe(),onClick:a=>{oe(),n("tabClick",e,b,a)},onKeydown:a=>{const t=L(a);!p||t!==_.delete&&t!==_.backspace||n("tabRemove",e,a)}},[m,f])});return W.value,S("div",{ref:x,class:[u.e("nav-wrap"),u.is("scrollable",!!N.value),u.is(o.props.tabPosition)]},[e,S("div",{class:u.e("nav-scroll"),ref:g},[l.panes.length>0?S("div",{class:[u.e("nav"),u.is(o.props.tabPosition),u.is("stretch",l.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:y,style:O.value,role:"tablist",onKeydown:se,onWheel:X},[l.type?null:S(be,{ref:w,tabs:[...l.panes],tabRefs:C.value},null),a]):null])])}}}),he=u({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:i(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ge=e=>Y(e)||q(e);var ye=l({name:"ElTabs",props:he,emits:{[O]:e=>ge(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ge(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ge(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=b("tabs"),o=k(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:u,removeChild:i,ChildrenSorter:d}=ne(K(),"ElTabPane"),v=p(),c=p(null!=(s=e.modelValue)?s:"0"),h=async(t,l=!1)=>{var s,n,o,u;if(c.value!==t&&!$(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,c.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=r.value.find(e=>e.paneName===c.value))?void 0:s.isFocusInsidePane();c.value=t,l&&(a(O,t),a("tabChange",t)),null==(o=null==(n=v.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(u=v.value)||u.focusActiveTab())}}catch(i){}},g=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),h(t,!0))},y=(e,t)=>{e.props.disabled||$(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},x=()=>{a("edit",void 0,"add"),a("tabAdd")},C=e=>{const a=L(e);[_.enter,_.numpadEnter].includes(a)&&x()},w=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return f(()=>e.modelValue,e=>h(e)),f(c,async()=>{var e;await m(),null==(e=v.value)||e.scrollToActiveTab()}),W(ie,{props:e,currentName:c,registerPane:u,unregisterPane:i,nav$:v}),l({currentName:c,get tabNavRef(){return se(v.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?S("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:x,onKeydown:C},[a?z(t,"add-icon"):S(F,{class:n.is("icon-plus")},{default:()=>[S(M,null,null)]})]):null,s=S("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[S(d,null,{default:()=>S(me,{ref:v,currentName:c.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:g,onTabRemove:y},null),$stable:!0}),l]),u=S("div",{class:n.e("content")},[z(t,"default")]);return S("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:w,onVnodeUpdated:w},[u,s])}}});const xe=u({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Ce="ElTabPane",we=l({name:Ce});var Ne=P(l({...we,props:xe,setup(e){const a=e,t=K(),l=H(),s=v(ie);s||c(Ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=b("tab-pane"),o=p(),r=p(),u=k(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),i=I(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),d=p(i.value),m=k(()=>{var e;return null!=(e=a.name)?e:r.value}),h=I(()=>!a.lazy||d.value||i.value);f(i,e=>{e&&(d.value=!0)});const N=D({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:m,active:i,index:r,isClosable:u,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(N),g(()=>{s.unregisterPane(N)}),U(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>w(h)?X((y(),x("div",{key:0,id:`pane-${w(m)}`,ref_key:"paneRef",ref:o,class:C(w(n).b()),role:"tabpanel","aria-hidden":!w(i),"aria-labelledby":`tab-${w(m)}`},[z(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[G,w(i)]]):J("v-if",!0)}}),[["__file","tab-pane.vue"]]);const Pe=Q(ye,{TabPane:Ne}),$e=Z(Ne);export{Pe as E,$e as a};
