/* empty css                  *//* empty css                   */import{E as t}from"./el-link-c245de26.js";import"./el-tag-418c1d1c.js";import{E as e,a}from"./el-select-b829cea3.js";import"./el-scrollbar-0528a0c4.js";import{H as s}from"./index.esm.min-44700bfe.js";import{d as i}from"./dayjs.min-fd58e32d.js";import{ax as l,r,b as o,W as c,o as d,an as n,c as v,d as u,e as m,f as p,w as y,a5 as h,L as f,h as b,a7 as w,ap as g,n as _,E as D,l as j,j as k,F as C,J as x,K as S}from"./index-cd351671.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";import{u as E,i as L,a as T,b as F,c as M,d as P,e as H}from"./install-1118e355.js";import{i as W}from"./install-5ec4a471.js";import{v as Y}from"./directive-1c779a20.js";import"./strings-b003b1cc.js";import"./castArray-824cd328.js";const U={class:"home"},V={class:"page-header"},z={class:"actions"},G={class:"stats-grid"},I={class:"stat-card"},J={class:"stat-icon primary"},O={class:"stat-content"},q={class:"stat-number"},B={class:"stat-card"},K={class:"stat-icon success"},R={class:"stat-content"},N={class:"stat-number"},Q={class:"stat-card"},X={class:"stat-icon danger"},Z={class:"stat-content"},$={class:"stat-number"},tt={class:"charts-grid"},et={class:"chart-card"},at={class:"chart-header"},st={class:"chart-container"},it={class:"chart-card"},lt={class:"chart-container"},rt={class:"activity-section"},ot={class:"card"},ct={class:"card-header"},dt={class:"activity-list"},nt={class:"activity-content"},vt={class:"activity-title"},ut={class:"activity-desc"},mt={class:"activity-time"},pt=A({__name:"Home",setup(A){E([L,W,T,F,M,P,H]);const pt=r(!1),yt=o({users:0,devices:0,testTasks:0}),ht=r("7d"),ft=r([]),bt=c(()=>({title:{show:!1},tooltip:{trigger:"axis"},legend:{data:["完成任务","失败任务","进行中任务"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"完成任务",type:"line",smooth:!0,data:[12,13,10,13,9,23,21],itemStyle:{color:"#67C23A"}},{name:"失败任务",type:"line",smooth:!0,data:[5,3,7,2,4,6,3],itemStyle:{color:"#F56C6C"}},{name:"进行中任务",type:"line",smooth:!0,data:[8,12,15,10,13,11,14],itemStyle:{color:"#E6A23C"}}]})),wt=c(()=>({title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"设备状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:335,name:"在线",itemStyle:{color:"#67C23A"}},{value:310,name:"离线",itemStyle:{color:"#909399"}},{value:234,name:"忙碌",itemStyle:{color:"#E6A23C"}},{value:135,name:"维护",itemStyle:{color:"#F56C6C"}}]}]})),gt=async()=>{try{const t=await l({url:"/home/stats",method:"get"});200===t.code?Object.assign(yt,t.data):(yt.users=156,yt.devices=42,yt.testTasks=324)}catch(t){console.error("获取统计数据失败:",t),yt.users=156,yt.devices=42,yt.testTasks=324}},_t=async()=>{try{const t=await function(t={}){return l({url:"/home/activities",method:"get",params:t})}({limit:10});200===t.code?ft.value=t.data:ft.value=[{id:1,type:"task",title:"测试任务完成",description:"Android登录功能测试任务已成功完成",created_at:new Date(Date.now()-3e5)},{id:2,type:"device",title:"设备上线",description:"设备 iPhone 14 Pro 已连接并上线",created_at:new Date(Date.now()-9e5)},{id:3,type:"bug",title:"发现新缺陷",description:"在支付模块中发现严重缺陷",created_at:new Date(Date.now()-18e5)},{id:4,type:"user",title:"新用户注册",description:"测试工程师 张三 已注册账号",created_at:new Date(Date.now()-36e5)}]}catch(t){console.error("获取最近活动失败:",t),ft.value=[{id:1,type:"task",title:"测试任务完成",description:"Android登录功能测试任务已成功完成",created_at:new Date(Date.now()-3e5)},{id:2,type:"device",title:"设备上线",description:"设备 iPhone 14 Pro 已连接并上线",created_at:new Date(Date.now()-9e5)},{id:3,type:"bug",title:"发现新缺陷",description:"在支付模块中发现严重缺陷",created_at:new Date(Date.now()-18e5)},{id:4,type:"user",title:"新用户注册",description:"测试工程师 张三 已注册账号",created_at:new Date(Date.now()-36e5)}]}},Dt=async()=>{pt.value=!0;try{await Promise.all([gt(),_t()]),_.success("数据刷新成功")}catch(t){_.error("数据刷新失败")}finally{pt.value=!1}},jt=()=>{_.info("查看全部活动功能待完善")};return d(()=>{Dt()}),(l,r)=>{const o=n("Refresh"),c=D,d=j,_=n("User"),A=n("Monitor"),E=n("List"),L=a,T=e,F=t,M=Y;return v(),u("div",U,[m("div",V,[r[2]||(r[2]=m("h1",{class:"title"},"首页",-1)),m("div",z,[p(d,{type:"primary",onClick:Dt},{default:y(()=>[p(c,null,{default:y(()=>[p(o)]),_:1}),r[1]||(r[1]=k(" 刷新数据 ",-1))]),_:1})])]),m("div",G,[h((v(),u("div",I,[m("div",J,[p(c,null,{default:y(()=>[p(_)]),_:1})]),m("div",O,[m("div",q,f(yt.users),1),r[3]||(r[3]=m("div",{class:"stat-label"},"用户总数",-1))])])),[[M,pt.value]]),h((v(),u("div",B,[m("div",K,[p(c,null,{default:y(()=>[p(A)]),_:1})]),m("div",R,[m("div",N,f(yt.devices),1),r[4]||(r[4]=m("div",{class:"stat-label"},"设备总数",-1))])])),[[M,pt.value]]),h((v(),u("div",Q,[m("div",X,[p(c,null,{default:y(()=>[p(E)]),_:1})]),m("div",Z,[m("div",$,f(yt.testTasks),1),r[5]||(r[5]=m("div",{class:"stat-label"},"测试任务",-1))])])),[[M,pt.value]])]),m("div",tt,[m("div",et,[m("div",at,[r[6]||(r[6]=m("h3",null,"测试任务趋势",-1)),p(T,{modelValue:ht.value,"onUpdate:modelValue":r[0]||(r[0]=t=>ht.value=t),size:"small",style:{width:"120px"}},{default:y(()=>[p(L,{label:"最近7天",value:"7d"}),p(L,{label:"最近30天",value:"30d"}),p(L,{label:"最近90天",value:"90d"})]),_:1},8,["modelValue"])]),m("div",st,[p(b(s),{class:"chart",option:bt.value},null,8,["option"])])]),m("div",it,[r[7]||(r[7]=m("div",{class:"chart-header"},[m("h3",null,"设备状态分布")],-1)),m("div",lt,[p(b(s),{class:"chart",option:wt.value},null,8,["option"])])])]),m("div",rt,[m("div",ot,[m("div",ct,[r[9]||(r[9]=m("h3",null,"最近活动",-1)),p(F,{type:"primary",onClick:jt},{default:y(()=>[...r[8]||(r[8]=[k("查看全部",-1)])]),_:1})]),m("div",dt,[(v(!0),u(w,null,g(ft.value,t=>{return v(),u("div",{key:t.id,class:"activity-item"},[m("div",{class:C(["activity-icon",t.type])},[p(c,null,{default:y(()=>{return[(v(),x(S((e=t.type,{task:"List",device:"Monitor",user:"User",bug:"Warning"}[e]||"Document"))))];var e}),_:2},1024)],2),m("div",nt,[m("div",vt,f(t.title),1),m("div",ut,f(t.description),1),m("div",mt,f((e=t.created_at,i(e).format("YYYY-MM-DD HH:mm:ss"))),1)])]);var e}),128))])])])])}}},[["__scopeId","data-v-bd2ee504"]]);export{pt as default};
