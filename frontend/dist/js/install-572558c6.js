import{e9 as t,av as e,_ as n,aO as o,aG as i,ad as a,ea as r,dS as s,eb as l,V as u,ay as d,g as h,aS as c,o as p,bR as f,aE as g,aD as m,bq as v,b5 as y,dV as x,dT as _,ec as b,B as M,bh as w,K as S,ed as C,bu as A,aW as T,b0 as I,bZ as O,ee as R,ef as D,eg as k,cA as z,aT as P,bi as L,ce as Z,cf as B,dJ as E,bO as V,d7 as H,bm as W,eh as N,ei as Y,r as X,df as G,dK as F,ej as j,ek as U,Y as K,p as q,as as $,ar as J,N as Q,el as tt,em as et,en as nt,u as ot,cW as it,cv as at,cw as rt,dr as st,bx as lt,eo as ut,az as dt,x as ht,dF as ct,bP as pt,cz as ft,cr as gt}from"./install-1118e355.js";var mt="\0_ec_interaction_mutex";function vt(t,e){return!!yt(t)[e]}function yt(t){return t[mt]||(t[mt]={})}function xt(t,e,n,o,i){t.pointerChecker&&t.pointerChecker(o,i.originX,i.originY)&&(s(o.event),_t(t,e,n,o,i))}function _t(t,e,n,i,a){a.isAvailableBehavior=o(bt,null,n,i),t.trigger(e,a)}function bt(t,e,n){var o=n[t];return!t||o&&(!u(o)||e.event[o+"Key"])}t({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},e);const Mt=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var r=o(n._mousedownHandler,n),s=o(n._mousemoveHandler,n),l=o(n._mouseupHandler,n),u=o(n._mousewheelHandler,n),d=o(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=i(a(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",l)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",u),e.on("pinch",d))},n.disable=function(){e.off("mousedown",r),e.off("mousemove",s),e.off("mouseup",l),e.off("mousewheel",u),e.off("pinch",d)},n}return n(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!r(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var n=t.offsetX,o=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&bt("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!vt(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,o=this._x,i=this._y,a=e-o,r=n-i;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&s(t.event),_t(this,"pan","moveOnMouseMove",t,{dx:a,dy:r,oldX:o,oldY:i,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){r(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=bt("zoomOnMouseWheel",t,this._opt),n=bt("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,i=Math.abs(o),a=t.offsetX,r=t.offsetY;if(0!==o&&(e||n)){if(e){var s=i>3?1.4:i>1?1.2:1.1;xt(this,"zoom","zoomOnMouseWheel",t,{scale:o>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var l=Math.abs(o);xt(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(o>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){vt(this._zr,"globalPan")||xt(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(l);var wt={axisPointer:1,tooltip:1,brush:1};function St(t,e,n){var o=e.getComponentByElement(t.topTarget),i=o&&o.coordinateSystem;return o&&o!==n&&!wt.hasOwnProperty(o.mainType)&&i&&i.model!==n}function Ct(t,e,n,o,i,a){t=t||0;var r=n[1]-n[0];if(null!=i&&(i=Tt(i,[0,r])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===o){var s=Math.abs(e[1]-e[0]);s=Tt(s,[0,r]),i=a=Tt(s,[i,a]),o=0}e[0]=Tt(e[0],n),e[1]=Tt(e[1],n);var l=At(e,o);e[o]+=t;var u,d=i||0,h=n.slice();return l.sign<0?h[0]+=d:h[1]-=d,e[o]=Tt(e[o],h),u=At(e,o),null!=i&&(u.sign!==l.sign||u.span<i)&&(e[1-o]=e[o]+l.sign*i),u=At(e,o),null!=a&&u.span>a&&(e[1-o]=e[o]+u.sign*a),e}function At(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Tt(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var It=!0,Ot=Math.min,Rt=Math.max,Dt=Math.pow,kt="globalPan",zt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Pt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Lt={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Zt=0,Bt=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new d,n._uid="brushController_"+Zt++,h(de,function(t,e){this._handlers[e]=o(t,this)},n),n}return n(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||function(t,e,n){yt(t)[e]=n}(e,kt,this._uid),h(this._handlers,function(t,n){e.on(n,t)}),this._brushType=t.brushType,this._brushOption=c(a(Lt),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;!function(t,e,n){var o=yt(t);o[e]===n&&(o[e]=null)}(t,kt,this._uid),h(this._handlers,function(e,n){t.off(n,e)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};h(t,function(t){e[t.panelId]=a(t)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=p(t,function(t){return c(a(Lt),t,!0)});var e=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new f(e,t,function(t,e){return r(t.__brushOption,e)},r).add(s).update(s).remove(function(t){e[t]!==i&&o.group.remove(e[t])}).execute(),this;function r(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function s(a,r){var s=t[a];if(null!=r&&e[r]===i)n[a]=e[r];else{var l=n[a]=null!=r?(e[r].__brushOption=s,e[r]):Vt(o,Et(o,s));Nt(o,l)}}},e.prototype.unmount=function(){return this.enableBrush(!1),Ft(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(l);function Et(t,e){var n=ce[e.brushType].createCover(t,e);return n.__brushOption=e,Wt(n,e),t.group.add(n),n}function Vt(t,e){var n=Yt(e);return n.endCreating&&(n.endCreating(t,e),Wt(e,e.__brushOption)),e}function Ht(t,e){var n=e.__brushOption;Yt(e).updateCoverShape(t,e,n.range,n)}function Wt(t,e){var n=e.z;null==n&&(n=1e4),t.traverse(function(t){t.z=n,t.z2=n})}function Nt(t,e){Yt(e).updateCommon(t,e),Ht(t,e)}function Yt(t){return ce[t.__brushOption.brushType]}function Xt(t,e,n){var o,i=t._panels;if(!i)return It;var a=t._transform;return h(i,function(t){t.isTargetByCursor(e,n,a)&&(o=t)}),o}function Gt(t,e){var n=t._panels;if(!n)return It;var o=e.__brushOption.panelId;return null!=o?n[o]:It}function Ft(t){var e=t._covers,n=e.length;return h(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function jt(t,e){var n=p(t._covers,function(t){var e=t.__brushOption,n=a(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Ut(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Kt(t,e,n,o){var i=new d;return i.add(new y({name:"main",style:Qt(n),silent:!0,draggable:!0,cursor:"move",drift:v(ne,t,e,i,["n","s","w","e"]),ondragend:v(jt,e,{isEnd:!0})})),h(o,function(n){i.add(new y({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:v(ne,t,e,i,n),ondragend:v(jt,e,{isEnd:!0})}))}),i}function qt(t,e,n,o){var i=o.brushStyle.lineWidth||0,a=Rt(i,6),r=n[0][0],s=n[1][0],l=r-i/2,u=s-i/2,d=n[0][1],h=n[1][1],c=d-a+i/2,p=h-a+i/2,f=d-r,g=h-s,m=f+i,v=g+i;Jt(t,e,"main",r,s,f,g),o.transformable&&(Jt(t,e,"w",l,u,a,v),Jt(t,e,"e",c,u,a,v),Jt(t,e,"n",l,u,m,a),Jt(t,e,"s",l,p,m,a),Jt(t,e,"nw",l,u,a,a),Jt(t,e,"ne",c,u,a,a),Jt(t,e,"sw",l,p,a,a),Jt(t,e,"se",c,p,a,a))}function $t(t,e){var n=e.__brushOption,o=n.transformable,i=e.childAt(0);i.useStyle(Qt(n)),i.attr({silent:!o,cursor:o?"move":"default"}),h([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var i=e.childOfName(n.join("")),a=1===n.length?ee(t,n[0]):function(t,e){var n=[ee(t,e[0]),ee(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(t,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?Pt[a]+"-resize":null})})}function Jt(t,e,n,o,i,a,r){var s,l,u,d,h,c=e.childOfName(n);c&&c.setShape((s=ae(t,e,[[o,i],[o+a,i+r]]),l=Ot(s[0][0],s[1][0]),u=Ot(s[0][1],s[1][1]),d=Rt(s[0][0],s[1][0]),h=Rt(s[0][1],s[1][1]),{x:l,y:u,width:d-l,height:h-u}))}function Qt(t){return i({strokeNoScale:!0},t.brushStyle)}function te(t,e,n,o){var i=[Ot(t,n),Ot(e,o)],a=[Rt(t,n),Rt(e,o)];return[[i[0],a[0]],[i[1],a[1]]]}function ee(t,e){var n=x({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return _(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function ne(t,e,n,o,i,a){var r=n.__brushOption,s=t.toRectRange(r.range),l=ie(e,i,a);h(o,function(t){var e=zt[t];s[e[0]][e[1]]+=l[e[0]]}),r.range=t.fromRectRange(te(s[0][0],s[1][0],s[0][1],s[1][1])),Nt(e,n),jt(e,{isEnd:!1})}function oe(t,e,n,o){var i=e.__brushOption.range,a=ie(t,n,o);h(i,function(t){t[0]+=a[0],t[1]+=a[1]}),Nt(t,e),jt(t,{isEnd:!1})}function ie(t,e,n){var o=t.group,i=o.transformCoordToLocal(e,n),a=o.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function ae(t,e,n){var o=Gt(t,e);return o&&o!==It?o.clipPath(n,t._transform):a(n)}function re(t){var e=t.event;e.preventDefault&&e.preventDefault()}function se(t,e,n){return t.childOfName("main").contain(e,n)}function le(t,e,n,o){var i,r=t._creatingCover,s=t._creatingPanel,l=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],o=e[0],i=n[0]-o[0],a=n[1]-o[1];return Dt(i*i+a*a,.5)>6}(t)||r){if(s&&!r){"single"===l.brushMode&&Ft(t);var u=a(l);u.brushType=ue(u.brushType,s),u.panelId=s===It?null:s.panelId,r=t._creatingCover=Et(t,u),t._covers.push(r)}if(r){var d=ce[ue(t._brushType,s)];r.__brushOption.range=d.getCreatingRange(ae(t,r,t._track)),o&&(Vt(t,r),d.updateCommon(t,r)),Ht(t,r),i={isEnd:o}}}else o&&"single"===l.brushMode&&l.removeOnClick&&Xt(t,e,n)&&Ft(t)&&(i={isEnd:o,removeOnClick:!0});return i}function ue(t,e){return"auto"===t?e.defaultBrushType:t}var de={mousedown:function(t){if(this._dragging)he(this,t);else if(!t.target||!t.target.draggable){re(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=Xt(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,o=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var o=t._zr;return e<0||e>o.getWidth()||n<0||n>o.getHeight()}(t,e.offsetX,e.offsetY)){var o=t._zr,i=t._covers,a=Xt(t,e,n);if(!t._dragging)for(var r=0;r<i.length;r++){var s=i[r].__brushOption;if(a&&(a===It||s.panelId===a.panelId)&&ce[s.brushType].contain(i[r],n[0],n[1]))return}a&&o.setCursorStyle("crosshair")}}(this,t,o),this._dragging){re(t);var i=le(this,t,o,!1);i&&jt(this,i)}},mouseup:function(t){he(this,t)}};function he(t,e){if(t._dragging){re(e);var n=e.offsetX,o=e.offsetY,i=t.group.transformCoordToLocal(n,o),a=le(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&jt(t,a)}}var ce={lineX:pe(0),lineY:pe(1),rect:{createCover:function(t,e){function n(t){return t}return Kt({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Ut(t);return te(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,o){qt(t,e,n,o)},updateCommon:$t,contain:se},polygon:{createCover:function(t,e){var n=new d;return n.add(new g({name:"main",style:Qt(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new m({name:"main",draggable:!0,drift:v(oe,t,e),ondragend:v(jt,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,o){e.childAt(0).setShape({points:ae(t,e,n)})},updateCommon:$t,contain:se}};function pe(t){return{createCover:function(e,n){return Kt({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Ut(e);return[Ot(n[0][t],n[1][t]),Rt(n[0][t],n[1][t])]},updateCoverShape:function(e,n,o,i){var a,r=Gt(e,n);if(r!==It&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[o,a];t&&l.reverse(),qt(e,n,l,i)},updateCommon:$t,contain:se}}const fe=Bt;function ge(t){return t=ye(t),function(e){return b(e,t)}}function me(t,e){return t=ye(t),function(n){var o=null!=e?e:n,i=o?t.width:t.height,a=o?t.x:t.y;return[a,a+(i||0)]}}function ve(t,e,n){var o=ye(t);return function(t,i){return o.contain(i[0],i[1])&&!St(t,e,n)}}function ye(t){return M.create(t)}var xe=["x","y","radius","angle","single"],_e=["cartesian2d","polar","singleAxis"];function be(t){return t+"Axis"}function Me(t,e){var n,o=w(),i=[],a=w();t.eachComponent({mainType:"dataZoom",query:e},function(t){a.get(t.uid)||s(t)});do{n=!1,t.eachComponent("dataZoom",r)}while(n);function r(t){!a.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis(function(t,n){var i=o.get(t);i&&i[n]&&(e=!0)}),e}(t)&&(s(t),n=!0)}function s(t){a.set(t.uid,!0),i.push(t),t.eachTargetAxis(function(t,e){(o.get(t)||o.set(t,[]))[e]=!0})}return i}function we(t){var e=t.ecModel,n={infoList:[],infoMap:w()};return t.eachTargetAxis(function(t,o){var i=e.getComponent(be(t),o);if(i){var a=i.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(i)}}}),n}var Se=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}();function Ce(t){var e={};return h(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}const Ae=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return n(e,t),e.prototype.init=function(t,e,n){var o=Ce(t);this.settledOption=o,this.mergeDefaultAndTheme(t,n),this._doInit(o)},e.prototype.mergeOption=function(t){var e=Ce(t);c(this.option,t,!0),c(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;h([["start","startValue"],["end","endValue"]],function(t,o){"value"===this._rangePropMode[o]&&(e[t[0]]=n[t[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=w();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(t){t.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return h(xe,function(n){var o=this.getReferringComponents(be(n),C);if(o.specified){e=!0;var i=new Se;h(o.models,function(t){i.add(t.componentIndex)}),t.set(n,i)}},this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,o=!0;if(o){var i="vertical"===e?"y":"x";a(n.findComponents({mainType:i+"Axis"}),i)}o&&a(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,n){var i=e[0];if(i){var a=new Se;if(a.add(i.componentIndex),t.set(n,a),o=!1,"x"===n||"y"===n){var r=i.getReferringComponents("grid",A).models[0];r&&h(e,function(t){i.componentIndex!==t.componentIndex&&r===t.getReferringComponents("grid",A).models[0]&&a.add(t.componentIndex)})}}}o&&h(xe,function(e){if(o){var i=n.findComponents({mainType:be(e),filter:function(t){return"category"===t.get("type",!0)}});if(i[0]){var a=new Se;a.add(i[0].componentIndex),t.set(e,a),o=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");h([["start","startValue"],["end","endValue"]],function(o,i){var a=null!=t[o[0]],r=null!=t[o[1]];a&&!r?e[i]="percent":!a&&r?e[i]="value":n?e[i]=n[i]:a&&(e[i]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,n){null==t&&(t=this.ecModel.getComponent(be(e),n))},this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(n,o){h(n.indexList,function(n){t.call(e,o,n)})})},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(be(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;h([["start","startValue"],["end","endValue"]],function(o){null==t[o[0]]&&null==t[o[1]]||(e[o[0]]=n[o[0]]=t[o[0]],e[o[1]]=n[o[1]]=t[o[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;h(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],a=this._targetAxisInfoMap.get(i),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(i,a.indexList[r]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(T);const Te=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.select",e}(Ae);const Ie=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n,o){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(I);const Oe=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.select",e}(Ie);var Re=h,De=z;const ke=function(){function t(t,e,n,o){this._dimName=t,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(function(t){var e=t.get("coordinateSystem");return S(_e,e)>=0}(e)){var n=be(this._dimName),o=e.getReferringComponents(n,A).models[0];o&&this._axisIndex===o.componentIndex&&t.push(e)}},this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return a(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];Re(["start","end"],function(l,u){var d=t[l],h=t[l+"Value"];"percent"===i[u]?(null==d&&(d=a[u]),h=o.parse(O(d,a,n))):(e=!0,h=null==h?n[u]:o.parse(h),d=O(h,n,a)),s[u]=null==h||isNaN(h)?n[u]:h,r[u]=null==d||isNaN(d)?a[u]:d}),De(s),De(r);var l=this._minMaxSpan;function u(t,e,n,i,a){var r=a?"Span":"ValueSpan";Ct(0,t,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)e[s]=O(t[s],n,i,!0),a&&(e[s]=o.parse(e[s]))}return e?u(s,r,n,a,!1):u(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var o=[1/0,-1/0];Re(n,function(t){D(o,t.getData(),e)});var i=t.getAxisModel(),a=k(i.axis.scale,i,o).calculate();return[a.min,a.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=t.get("filterMode"),a=this._valueWindow;"none"!==i&&Re(o,function(t){var e=t.getData(),o=e.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var r=e.getStore(),s=p(o,function(t){return e.getDimensionIndex(t)},e);e.filterSelf(function(t){for(var e,n,i,l=0;l<o.length;l++){var u=r.get(s[l],t),d=!isNaN(u),h=u<a[0],c=u>a[1];if(d&&!h&&!c)return!0;d&&(i=!0),h&&(e=!0),c&&(n=!0)}return i&&e&&n})}else Re(o,function(n){if("empty"===i)t.setData(e=e.map(n,function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN}));else{var o={};o[n]=a,e.selectRange(o)}});Re(o,function(t){e.setApproximateExtent(a,t)})}})}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;Re(["min","max"],function(o){var i=e.get(o+"Span"),a=e.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=O(n[0]+a,n,[0,100],!0):null!=i&&(a=O(i,[0,100],n,!0)-n[0]),t[o+"Span"]=i,t[o+"ValueSpan"]=a},this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var o=R(n,[0,500]);o=Math.min(o,20);var i=t.axis.scale.rawExtentInfo;0!==e[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==e[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},t}();const ze={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,i){var a=t.getComponent(be(o),i);e(o,i,a,n)})})}e(function(t,e,n,o){n.__dzAxisProxy=null});var n=[];e(function(e,o,i,a){i.__dzAxisProxy||(i.__dzAxisProxy=new ke(e,o,a,t),n.push(i.__dzAxisProxy))});var o=w();return h(n,function(t){h(t.getTargetSeriesModels(),function(t){o.set(t.uid,t)})}),o},overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,n){t.getAxisProxy(e,n).reset(t)}),t.eachTargetAxis(function(n,o){t.getAxisProxy(n,o).filterData(t,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),o=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}})}};var Pe=!1;function Le(t){Pe||(Pe=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,ze),function(t){t.registerAction("dataZoom",function(t,e){var n=Me(e,t);h(n,function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Ze(t){t.registerComponentModel(Te),t.registerComponentView(Oe),Le(t)}var Be=function(){},Ee={};function Ve(t,e){Ee[t]=e}function He(t){return Ee[t]}const We=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;h(this.option.feature,function(t,n){var o=He(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(e)),c(t,o.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(T);const Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(t,e,n,i){var a=this.group;if(a.removeAll(),t.get("show")){var r=+t.get("itemSize"),s="vertical"===t.get("orient"),l=t.get("feature")||{},d=this._features||(this._features={}),c=[];h(l,function(t,e){c.push(e)}),new f(this._featureNames||[],c).add(p).update(p).remove(v(p,null)).execute(),this._featureNames=c,N(a,t,n),a.add(Y(a.getBoundingRect(),t)),s||a.eachChild(function(t){var e=t.__title,o=t.ensureState("emphasis"),i=o.textConfig||(o.textConfig={}),s=t.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!X(l)&&e){var u=l.style||(l.style={}),d=G(e,V.makeFont(u)),h=t.x+a.x,c=!1;t.y+a.y+r+d.height>n.getHeight()&&(i.position="top",c=!0);var p=c?-5-d.height:r+10;h+d.width/2>n.getWidth()?(i.position=["100%",p],u.align="right"):h-d.width/2<0&&(i.position=[0,p],u.align="left")}})}function p(p,f){var g,m=c[p],v=c[f],y=l[m],x=new P(y,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===m&&(y.title=i.newTitle),m&&!v){if(function(t){return 0===t.indexOf("my")}(m))g={onclick:x.option.onclick,featureName:m};else{var _=He(m);if(!_)return;g=new _}d[m]=g}else if(!(g=d[v]))return;g.uid=L("toolbox-feature"),g.model=x,g.ecModel=e,g.api=n;var b=g instanceof Be;m||!v?!x.get("show")||b&&g.unusable?b&&g.remove&&g.remove(e,n):(!function(i,l,d){var c,p,f=i.getModel("iconStyle"),g=i.getModel(["emphasis","iconStyle"]),m=l instanceof Be&&l.getIcons?l.getIcons():i.get("icon"),v=i.get("title")||{};u(m)?(c={})[d]=m:c=m;u(v)?(p={})[d]=v:p=v;var y=i.iconPaths={};h(c,function(u,d){var h=E(u,{},{x:-r/2,y:-r/2,width:r,height:r});h.setStyle(f.getItemStyle()),h.ensureState("emphasis").style=g.getItemStyle();var c=new V({style:{text:p[d],align:g.get("textAlign"),borderRadius:g.get("textBorderRadius"),padding:g.get("textPadding"),fill:null,font:H({fontStyle:g.get("textFontStyle"),fontFamily:g.get("textFontFamily"),fontSize:g.get("textFontSize"),fontWeight:g.get("textFontWeight")},e)},ignore:!0});h.setTextContent(c),W({el:h,componentModel:t,itemName:d,formatterParamsExtra:{title:p[d]}}),h.__title=p[d],h.on("mouseover",function(){var e=g.getItemStyle(),o=s?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";c.setStyle({fill:g.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:g.get("textBackgroundColor")}),h.setTextConfig({position:g.get("textPosition")||o}),c.ignore=!t.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==i.get(["iconStatus",d])&&n.leaveEmphasis(this),c.hide()}),("emphasis"===i.get(["iconStatus",d])?Z:B)(h),a.add(h),h.on("click",o(l.onclick,l,e,n,d)),y[d]=h})}(x,g,m),x.setIconStatus=function(t,e){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,o[t]&&("emphasis"===e?Z:B)(o[t])},g instanceof Be&&g.render&&g.render(x,e,n,i)):b&&g.dispose&&g.dispose(e,n)}},e.prototype.updateView=function(t,e,n,o){h(this._features,function(t){t instanceof Be&&t.updateView&&t.updateView(t.model,e,n,o)})},e.prototype.remove=function(t,e){h(this._features,function(n){n instanceof Be&&n.remove&&n.remove(t,e)}),this.group.removeAll()},e.prototype.dispose=function(t,e){h(this._features,function(n){n instanceof Be&&n.dispose&&n.dispose(t,e)})},e.type="toolbox",e}(I);const Ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){var n=this.model,o=n.get("name")||t.get("title.0.text")||"echarts",i="svg"===e.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",r=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=F.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||i){var l=r.split(","),u=l[0].indexOf("base64")>-1,d=i?decodeURIComponent(l[1]):l[1];u&&(d=window.atob(d));var h=o+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var c=d.length,p=new Uint8Array(c);c--;)p[c]=d.charCodeAt(c);var f=new Blob([p]);window.navigator.msSaveOrOpenBlob(f,h)}else{var g=document.createElement("iframe");document.body.appendChild(g);var m=g.contentWindow,v=m.document;v.open("image/svg+xml","replace"),v.write(d),v.close(),m.focus(),v.execCommand("SaveAs",!0,h),document.body.removeChild(g)}}else{var y=n.get("lang"),x='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=o}else{var b=document.createElement("a");b.download=o+"."+a,b.target="_blank",b.href=r;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},e.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},e}(Be);var Xe="__ec_magicType_stack__",Ge=[["line","bar"],["stack"]],Fe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return h(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n},e.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},e.prototype.onclick=function(t,e,n){var o=this.model,a=o.get(["seriesIndex",n]);if(je[n]){var r,s={series:[]};h(Ge,function(t){S(t,n)>=0&&h(t,function(t){o.setIconStatus(t,"normal")})}),o.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==a?null:{seriesIndex:a}},function(t){var e=t.subType,a=t.id,r=je[n](e,a,t,o);r&&(i(r,t.option),s.series.push(r));var l=t.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var d=u.dim+"Axis",h=t.getReferringComponents(d,A).models[0].componentIndex;s[d]=s[d]||[];for(var c=0;c<=h;c++)s[d][h]=s[d][h]||{};s[d][h].boundaryGap="bar"===n}}});var l=n;"stack"===n&&(r=c({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(l="tiled")),e.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:r,featureName:"magicType"})}},e}(Be),je={line:function(t,e,n,o){if("bar"===t)return c({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(t,e,n,o){if("line"===t)return c({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(t,e,n,o){var i=n.get("stack")===Xe;if("line"===t||"bar"===t)return o.setIconStatus("stack",i?"normal":"emphasis"),c({id:e,stack:i?"":Xe},o.get(["option","stack"])||{},!0)}};t({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});const Ue=Fe;var Ke=new Array(60).join("-"),qe="\t";function $e(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Je=new RegExp("[\t]+","g");function Qe(t,e){var n=t.split(new RegExp("\n*"+Ke+"\n*","g")),o={series:[]};return h(n,function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(qe)>=0)return!0}(t)){var i=function(t){for(var e=t.split(/\n+/g),n=$e(e.shift()).split(Je),o=[],i=p(n,function(t){return{name:t,data:[]}}),a=0;a<e.length;a++){var r=$e(e[a]).split(Je);o.push(r.shift());for(var s=0;s<r.length;s++)i[s]&&(i[s].data[a]=r[s])}return{series:i,categories:o}}(t),a=e[n],r=a.axisDim+"Axis";a&&(o[r]=o[r]||[],o[r][a.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else{i=function(t){for(var e=t.split(/\n+/g),n=$e(e.shift()),o=[],i=0;i<e.length;i++){var a=$e(e[i]);if(a){var r=a.split(Je),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[i]={name:s,value:[]},l=o[i].value):l=o[i]=[];for(var d=0;d<r.length;d++)l.push(+r[d]);1===l.length&&(u?o[i].value=l[0]:o[i]=l[0])}}return{name:n,data:o}}(t);o.series.push(i)}}),o}var tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){setTimeout(function(){e.dispatchAction({type:"hideTip"})});var n=e.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=o.get("lang")||[];a.innerHTML=r[0]||o.get("title"),a.style.cssText="margin:10px 20px",a.style.color=o.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var d=o.get("optionToContent"),c=o.get("contentToOption"),f=function(t){var e,n,o,i=function(t){var e={},n=[],o=[];return t.eachRawSeries(function(t){var i=t.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(t);else{var a=i.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;e[r]||(e[r]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},o.push({axisDim:a.dim,axisIndex:a.index})),e[r].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:o}}(t);return{value:q([(n=i.seriesGroupByCategoryAxis,o=[],h(n,function(t,e){var n=t.categoryAxis,i=t.valueAxis.dim,a=[" "].concat(p(t.series,function(t){return t.name})),r=[n.model.getCategories()];h(t.series,function(t){var e=t.getRawData();r.push(t.getRawData().mapArray(e.mapDimension(i),function(t){return t}))});for(var s=[a.join(qe)],l=0;l<r[0].length;l++){for(var u=[],d=0;d<r.length;d++)u.push(r[d][l]);s.push(u.join(qe))}o.push(s.join("\n"))}),o.join("\n\n"+Ke+"\n\n")),(e=i.other,p(e,function(t){var e=t.getRawData(),n=[t.name],o=[];return e.each(e.dimensions,function(){for(var t=arguments.length,i=arguments[t-1],a=e.getName(i),r=0;r<t-1;r++)o[r]=arguments[r];n.push((a?a+qe:"")+o.join(qe))}),n.join("\n")}).join("\n\n"+Ke+"\n\n"))],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+Ke+"\n\n"),meta:i.meta}}(t);if(X(d)){var g=d(e.getOption());u(g)?s.innerHTML=g:j(g)&&s.appendChild(g)}else{l.readOnly=o.get("readOnly");var m=l.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=o.get("textColor"),m.borderColor=o.get("textareaBorderColor"),m.backgroundColor=o.get("textareaColor"),l.value=f.value,s.appendChild(l)}var v=f.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+o.get("buttonColor"),x+=";color:"+o.get("buttonTextColor");var M=this;function w(){n.removeChild(i),M._dom=null}U(_,"click",w),U(b,"click",function(){if(null==c&&null!=d||null!=c&&null==d)w();else{var t;try{t=X(c)?c(s,e.getOption()):Qe(l.value,v)}catch(n){throw w(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),w()}}),_.innerHTML=r[1],b.innerHTML=r[2],b.style.cssText=_.style.cssText=x,!o.get("readOnly")&&y.appendChild(b),y.appendChild(_),i.appendChild(a),i.appendChild(s),i.appendChild(y),s.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},e}(Be);function en(t,e){return p(t,function(t,n){var o=e&&e[n];if($(o)&&!J(o)){$(t)&&!J(t)||(t={value:t});var a=null!=o.name&&null==t.name;return t=i(t,o),a&&delete t.name,t}return t})}t({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];h(t.newOption.series,function(t){var o=e.getSeriesByName(t.name)[0];if(o){var i=o.get("data");n.push({name:t.name,data:en(t.data,i)})}else n.push(K({type:"scatter"},t))}),e.mergeOption(i({series:n},t.newOption))});const nn=tn;var on=h,an=Q();function rn(t){var e=an(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){!function(t){an(t).snapshots=null}(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},e}(Be);t({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});const ln=sn;var un=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],dn=function(){function t(t,e,n){var o=this;this._targetInfoList=[];var i=cn(e,t);h(pn,function(t,e){(!n||!n.include||S(n.include,e)>=0)&&t(i,o._targetInfoList)})}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var o=mn[t.brushType](0,n,e);t.__rangeOffset={offset:yn[t.brushType](o.values,t.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},t.prototype.matchOutputRanges=function(t,e,n){h(t,function(t){var o=this.findTargetInfo(t,e);o&&!0!==o&&h(o.coordSyses,function(o){var i=mn[t.brushType](1,o,t.range,!0);n(t,i.values,o,e)})},this)},t.prototype.setInputRanges=function(t,e){h(t,function(t){var n,o,i,a,r,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=mn[t.brushType](0,s.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?yn[t.brushType](l.values,u.offset,(n=l.xyMinMax,o=u.xyMinMax,i=_n(n),a=_n(o),r=[i[0]/a[0],i[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):l.values}},this)},t.prototype.makePanelOpts=function(t,e){return p(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:ge(o),isTargetByCursor:ve(o,t,n.coordSysModel),getLinearBrushOtherExtent:me(o)}})},t.prototype.controlSeries=function(t,e,n){var o=this.findTargetInfo(t,n);return!0===o||o&&S(o.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,o=cn(e,t),i=0;i<n.length;i++){var a=n[i],r=t.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<fn.length;s++)if(fn[s](o,a))return a}return!0},t}();function hn(t){return t[0]>t[1]&&t.reverse(),t}function cn(t,e){return tt(t,e,{includeMainTypes:un})}var pn={grid:function(t,e){var n=t.xAxisModels,o=t.yAxisModels,i=t.gridModels,a=w(),r={},s={};(n||o||i)&&(h(n,function(t){var e=t.axis.grid.model;a.set(e.id,e),r[e.id]=!0}),h(o,function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0}),h(i,function(t){a.set(t.id,t),r[t.id]=!0,s[t.id]=!0}),a.each(function(t){var i=t.coordinateSystem,a=[];h(i.getCartesians(),function(t,e){(S(n,t.getAxis("x").model)>=0||S(o,t.getAxis("y").model)>=0)&&a.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:gn.grid,xAxisDeclared:r[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){h(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:gn.geo})})}},fn=[function(t,e){var n=t.xAxisModel,o=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],gn={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(_(t)),e}},mn={lineX:v(vn,0),lineY:v(vn,1),rect:function(t,e,n,o){var i=t?e.pointToData([n[0][0],n[1][0]],o):e.dataToPoint([n[0][0],n[1][0]],o),a=t?e.pointToData([n[0][1],n[1][1]],o):e.dataToPoint([n[0][1],n[1][1]],o),r=[hn([i[0],a[0]]),hn([i[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:p(n,function(n){var a=t?e.pointToData(n,o):e.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a}),xyMinMax:i}}};function vn(t,e,n,o){var i=n.getAxis(["x","y"][t]),a=hn(p([0,1],function(t){return e?i.coordToData(i.toLocalCoord(o[t]),!0):i.toGlobalCoord(i.dataToCoord(o[t]))})),r=[];return r[t]=a,r[1-t]=[NaN,NaN],{values:a,xyMinMax:r}}var yn={lineX:v(xn,0),lineY:v(xn,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return p(t,function(t,o){return[t[0]-n[0]*e[o][0],t[1]-n[1]*e[o][1]]})}};function xn(t,e,n,o){return[e[0]-o[t]*n[0],e[1]-o[t]*n[1]]}function _n(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const bn=dn;var Mn=h,wn=nt("toolbox-dataZoom_"),Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new fe(n.getZr()),this._brushController.on("brush",o(this._onBrush,this)).mount()),function(t,e,n,o,i){var a=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(a="dataZoomSelect"===o.key&&o.dataZoomSelectActive);n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var r=new bn(An(t),e,{include:["grid"]}),s=r.makePanelOpts(i,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(!(!a||!s.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return rn(t).length}(e)>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,n){Cn[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new bn(An(this.model),o,{include:["grid"]}).matchOutputRanges(e,o,function(t,e,n){if("cartesian2d"===n.type){var o=t.brushType;"rect"===o?(i("x",n,e[0]),i("y",n,e[1])):i({lineX:"x",lineY:"y"}[o],n,e)}}),function(t,e){var n=rn(t);on(e,function(e,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(a){var r=a.getPercentRange();n[0][o]={dataZoomId:o,start:r[0],end:r[1]}}}}),n.push(e)}(o,n),this._dispatchZoomAction(n)}function i(t,e,i){var a=e.getAxis(t),r=a.model,s=function(t,e,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(o=n)}),o}(t,r,o),l=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=Ct(0,i.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];Mn(t,function(t,n){e.push(a(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(Be),Cn={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=rn(t),n=e[e.length-1];e.length>1&&e.pop();var o={};return on(n,function(t,n){for(var i=e.length-1;i>=0;i--)if(t=e[i][n]){o[n]=t;break}}),o}(this.ecModel))}};function An(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}et("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var o=e.getModel(n),i=[],a=An(o),r=tt(t,a);return Mn(r.xAxisModels,function(t){return s(t,"xAxis","xAxisIndex")}),Mn(r.yAxisModels,function(t){return s(t,"yAxis","yAxisIndex")}),i}function s(t,e,n){var a=t.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:wn+e+a};r[n]=a,i.push(r)}});const Tn=Sn;function In(t){t.registerComponentModel(We),t.registerComponentView(Ne),Ve("saveAsImage",Ye),Ve("magicType",Ue),Ve("dataView",nn),Ve("dataZoom",Tn),Ve("restore",ln),ot(Ze)}const On=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.inside",e.defaultOption=it(Ae.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Ae);var Rn=Q();function Dn(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function kn(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function zn(t,e,n,o){return t.coordinateSystem.containPoint([n,o])}function Pn(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,e){var n=Rn(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=w());o.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){var n=we(t);h(n.infoList,function(n){var i=n.model.uid,a=o.get(i)||o.set(i,function(t,e){var n={model:e,containsPoint:v(zn,e),dispatchAction:v(kn,t),dataZoomInfoMap:null,controller:null},o=n.controller=new Mt(t.getZr());return h(["pan","zoom","scrollMove"],function(t){o.on(t,function(e){var o=[];n.dataZoomInfoMap.each(function(i){if(e.isAvailableBehavior(i.model.option)){var a=(i.getRange||{})[t],r=a&&a(i.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!i.model.get("disabled",!0)&&r&&o.push({dataZoomId:i.model.id,start:r[0],end:r[1]})}}),o.length&&n.dispatchAction(o)})}),n}(e,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=w())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})})}),o.each(function(t){var e,n=t.controller,i=t.dataZoomInfoMap;if(i){var a=i.keys()[0];null!=a&&(e=i.get(a))}if(e){var r=function(t){var e,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each(function(t){var a=t.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");o[n+r]>o[n+e]&&(e=r),i=i&&a.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(i);n.enable(r.controlType,r.opt),n.setPointerChecker(t.containsPoint),at(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else Dn(o,t)})})}var Ln=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return n(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),function(t,e,n){Rn(t).coordSysRecordMap.each(function(t){var o=t.dataZoomInfoMap.get(e.uid);o&&(o.getRange=n)})}(i,e,{pan:o(Zn.pan,this),zoom:o(Zn.zoom,this),scrollMove:o(Zn.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=Rn(t).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var a=o[i],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||Dn(n,r))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(Ie),Zn={zoom:function(t,e,n,o){var i=this.range,a=i.slice(),r=t.axisModels[0];if(r){var s=En[e](null,[o.originX,o.originY],r,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/o.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Ct(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}},pan:Bn(function(t,e,n,o,i,a){var r=En[o]([a.oldX,a.oldY],[a.newX,a.newY],e,i,n);return r.signal*(t[1]-t[0])*r.pixel/r.pixelLength}),scrollMove:Bn(function(t,e,n,o,i,a){return En[o]([0,0],[a.scrollDelta,a.scrollDelta],e,i,n).signal*(t[1]-t[0])*a.scrollDelta})};function Bn(t){return function(e,n,o,i){var a=this.range,r=a.slice(),s=e.axisModels[0];if(s)return Ct(t(r,s,e,n,o,i),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var En={grid:function(t,e,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(r.pixel=e[0]-t[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(t,e,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(r.pixel=e[0]-t[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(t,e,n,o,i){var a=n.axis,r=i.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}};const Vn=Ln;function Hn(t){Le(t),t.registerComponentModel(On),t.registerComponentView(Vn),Pn(t)}const Wn=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=it(Ae.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Ae);var Nn=y,Yn="horizontal",Xn="vertical",Gn=["line","bar","candlestick","scatter"],Fn={easing:"cubicOut",duration:100,delay:0};function jn(t){return"vertical"===t?"ns-resize":"ew-resize"}const Un=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return n(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=o(this._onBrush,this),this._onBrushEnd=o(this._onBrushEnd,this)},e.prototype.render=function(e,n,o,i){if(t.prototype.render.apply(this,arguments),at(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){rt(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new d;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,o=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},a=this._orient===Yn?{right:i.width-o.x-o.width,top:i.height-30-7-n,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},r=st(t.option);h(["right","top","width","height"],function(t){"ph"===r[t]&&(r[t]=a[t])});var s=lt(r,i);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===Xn&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),i=o&&o.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==Yn||i?n===Yn&&i?{scaleY:r?1:-1,scaleX:-1}:n!==Xn||i?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=t.getBoundingRect([a]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new Nn({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var a=new Nn({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:o(this._onClickPanel,this)}),r=this.api.getZr();i?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",r.on("mousemove",this._onBrush),r.on("mouseup",this._onBrushEnd)):(r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)),n.add(a)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=this._shadowSize||[],o=t.series,i=o.getRawData(),a=o.getShadowDim&&o.getShadowDim(),r=a&&i.getDimensionInfo(a)?o.getShadowDim():t.otherDim;if(null!=r){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(i!==this._shadowData||r!==this._shadowDim||e[0]!==n[0]||e[1]!==n[1]){var u=i.getDataExtent(r),h=.3*(u[1]-u[0]);u=[u[0]-h,u[1]+h];var c,p=[0,e[1]],f=[0,e[0]],v=[[e[0],0],[0,0]],y=[],x=f[1]/(i.count()-1),_=0,b=Math.round(i.count()/e[0]);i.each([r],function(t,e){if(b>0&&e%b)_+=x;else{var n=null==t||isNaN(t)||""===t,o=n?0:O(t,u,p,!0);n&&!c&&e?(v.push([v[v.length-1][0],0]),y.push([y[y.length-1][0],0])):!n&&c&&(v.push([_,0]),y.push([_,0])),v.push([_,o]),y.push([_,o]),_+=x,c=n}}),s=this._shadowPolygonPts=v,l=this._shadowPolylinePts=y}this._shadowData=i,this._shadowDim=r,this._shadowSize=[e[0],e[1]];for(var M=this.dataZoomModel,w=0;w<3;w++){var S=C(1===w);this._displayables.sliderGroup.add(S),this._displayables.dataShadowSegs.push(S)}}}function C(t){var e=M.getModel(t?"selectedDataBackground":"dataBackground"),n=new d,o=new m({shape:{points:s},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new g({shape:{points:l},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(o),n.add(i),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,o=this.ecModel;return t.eachTargetAxis(function(i,a){var r=t.getAxisProxy(i,a).getTargetSeriesModels();h(r,function(t){if(!(n||!0!==e&&S(Gn,t.get("type"))<0)){var r,s=o.getComponent(be(i),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[i],u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(r=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:i,otherDim:l,otherAxisInverse:r}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],i=e.handleLabels=[null,null],a=this._displayables.sliderGroup,r=this._size,s=this.dataZoomModel,l=this.api,u=s.get("borderRadius")||0,d=s.get("brushSelect"),c=e.filler=new Nn({silent:d,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});a.add(c),a.add(new Nn({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1],r:u},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),h([0,1],function(e){var r=s.get("handleIcon");!ut[r]&&r.indexOf("path://")<0&&r.indexOf("image://")<0&&(r="path://"+r);var l=dt(r,-1,0,2,2,null,!0);l.attr({cursor:jn(this._orient),draggable:!0,drift:o(this._onDragMove,this,e),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1),z2:5});var u=l.getBoundingRect(),d=s.get("handleSize");this._handleHeight=ht(d,this._size[1]),this._handleWidth=u.width/u.height*this._handleHeight,l.setStyle(s.getModel("handleStyle").getItemStyle()),l.style.strokeNoScale=!0,l.rectHover=!0,l.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),ct(l);var h=s.get("handleColor");null!=h&&(l.style.fill=h),a.add(n[e]=l);var c=s.getModel("textStyle"),p=(s.get("handleLabel")||{}).show||!1;t.add(i[e]=new V({silent:!0,invisible:!p,style:pt(c,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:c.getTextColor(),font:c.getFont()}),z2:10}))},this);var p=c;if(d){var f=ht(s.get("moveHandleSize"),r[1]),g=e.moveHandle=new y({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:r[1]-.5,height:f}}),m=.8*f,v=e.moveHandleIcon=dt(s.get("moveHandleIcon"),-m/2,-m/2,m,m,"#fff",!0);v.silent=!0,v.y=r[1]+f/2-.5,g.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var x=Math.min(r[1]/2,Math.max(f,10));(p=e.moveZone=new y({invisible:!0,shape:{y:r[1]-x,height:f+x}})).on("mouseover",function(){l.enterEmphasis(g)}).on("mouseout",function(){l.leaveEmphasis(g)}),a.add(g),a.add(v),a.add(p)}p.attr({draggable:!0,cursor:jn(this._orient),drift:o(this._onDragMove,this,"all"),ondragstart:o(this._showDataInfo,this,!0),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[O(t[0],[0,100],e,!0),O(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,o=this._handleEnds,i=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];Ct(e,o,i,n.get("zoomLock")?"all":t,null!=a.minSpan?O(a.minSpan,r,i,!0):null,null!=a.maxSpan?O(a.maxSpan,r,i,!0):null);var s=this._range,l=this._range=z([O(o[0],i,r,!0),O(o[1],i,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,o=z(n.slice()),i=this._size;h([0,1],function(t){var o=e.handles[t],a=this._handleHeight;o.attr({scaleX:a/2,scaleY:a/2,x:n[t]+(t?-1:1),y:i[1]/2-a/2})},this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:i[1]});var a={x:o[0],width:o[1]-o[0]};e.moveHandle&&(e.moveHandle.setShape(a),e.moveZone.setShape(a),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=e.dataShadowSegs,s=[0,o[0],o[1],i[0]],l=0;l<r.length;l++){var u=r[l],d=u.getClipPath();d||(d=new y,u.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:i[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,o=n.handleLabels,i=this._orient,a=["",""];if(e.get("showDetail")){var r=e.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=t?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var d=z(this._handleEnds.slice());function h(t){var e=_(n.handles[t].parent,this.group),r=x(0===t?"right":"left",e),s=this._handleWidth/2+5,l=ft([d[t]+(0===t?-s:s),this._size[1]/2],e);o[t].setStyle({x:l[0],y:l[1],verticalAlign:i===Yn?"middle":r,align:i===Yn?r:"center",text:a[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,o=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(i,20));return X(o)?o(t,a):u(o)?o.replace("{value}",a):a},e.prototype._showDataInfo=function(t){var e=(this.dataZoomModel.get("handleLabel")||{}).show||!1,n=this.dataZoomModel.getModel(["emphasis","handleLabel"]).get("show")||!1,o=t||this._dragging?n:e,i=this._displayables,a=i.handleLabels;a[0].attr("invisible",!o),a[1].attr("invisible",!o),i.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,o){this._dragging=!0,s(o.event);var i=this._displayables.sliderGroup.getLocalTransform(),a=ft([e,n],i,!0),r=this._updateInterval(t,a[0]),l=this.dataZoomModel.get("realtime");this._updateView(!l),r&&l&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var o=this._handleEnds,i=(o[0]+o[1])/2,a=this._updateInterval("all",n[0]-i);this._updateView(),a&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new gt(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),i=[0,100];this._range=z([O(n.x,o,i,!0),O(n.x+n.width,o,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(s(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,o=this.dataZoomModel,i=n.brushRect;i||(i=n.brushRect=new Nn({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(t,e),l=r.transformCoordToLocal(a.x,a.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),i.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Fn:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=we(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var o=this.api.getWidth(),i=this.api.getHeight();t={x:.2*o,y:.2*i,width:.6*o,height:.6*i}}return t},e.type="dataZoom.slider",e}(Ie);function Kn(t){t.registerComponentModel(Wn),t.registerComponentView(Un),Le(t)}function qn(t){ot(Hn),ot(Kn)}export{fe as B,Mt as R,Be as T,qn as a,ve as b,me as c,bn as d,Hn as e,Kn as f,In as i,ge as m,St as o,Ve as r,Ct as s};
