/* empty css                  */import{E as e,a}from"./el-col-ede98d7c.js";import{E as t}from"./el-card-487b44b2.js";import{E as l,a as s}from"./el-descriptions-item-82fb00c5.js";import{E as o}from"./el-tag-611fc351.js";import{r as i,t as r,u as n,a1 as d,o as u,c,d as v,e as p,f,w as m,n as h,L as _,h as b,aE as g,j as w,q as y,E as j,l as z}from"./index-ea26c5b6.js";import{a as S}from"./project-2db8b4c7.js";import{d as k}from"./dayjs.min-075d2e4a.js";import{H as x}from"./index.esm.min-ba355b4d.js";import{_ as E}from"./_plugin-vue_export-helper-1b428a4d.js";import{i as L}from"./install-32e522ce.js";import{u as W,i as C,a as O,b as D,c as Y,d as G,e as M}from"./install-39169bdd.js";const R={class:"project-detail"},H={class:"info-section"},q={class:"card-header"},B={class:"header-actions"},F={class:"info-section"},I={class:"description-content"},J={class:"info-section"},N=["href"],P={key:1},A=["href"],K={key:1},Q={class:"info-section"},T={class:"stat-item-with-chart"},U={class:"stat-header"},V={class:"stat-value"},X={class:"chart-container-small"},Z={class:"stat-item-with-chart"},$={class:"stat-header"},ee={class:"stat-value"},ae={class:"chart-container-small"},te={class:"stat-item-with-chart"},le={class:"stat-header"},se={class:"stat-value"},oe={class:"chart-container-small"},ie=E({__name:"ProjectDetail",setup(E){W([C,O,L,D,Y,G,M]);const ie=i(!1),re=i({}),ne=r(),de=n(),ue=i({title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,left:"center",textStyle:{fontSize:10},itemGap:10,padding:[10,0,0,0]},series:[{name:"缺陷分类",type:"pie",radius:"65%",avoidLabelOverlap:!1,itemStyle:{borderRadius:0,borderColor:"#fff",borderWidth:1},label:{show:!0,position:"outside",formatter:"{b}: {c} ({d}%)",fontSize:10},emphasis:{label:{show:!0,fontSize:"12",fontWeight:"bold"}},labelLine:{show:!0},data:[]}]}),ce=i({title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,left:"center",textStyle:{fontSize:10},itemGap:10,padding:[10,0,0,0]},series:[{name:"用例执行情况",type:"pie",radius:"65%",avoidLabelOverlap:!1,itemStyle:{borderRadius:0,borderColor:"#fff",borderWidth:1},label:{show:!0,position:"outside",formatter:"{b}: {c} ({d}%)",fontSize:10},emphasis:{label:{show:!0,fontSize:"12",fontWeight:"bold"}},labelLine:{show:!0},data:[]}]}),ve=i({title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,left:"center",textStyle:{fontSize:10},itemGap:10,padding:[10,0,0,0]},series:[{name:"迭代统计",type:"pie",radius:"65%",avoidLabelOverlap:!1,itemStyle:{borderRadius:0,borderColor:"#fff",borderWidth:1},label:{show:!0,position:"outside",formatter:"{b}: {c} ({d}%)",fontSize:10},emphasis:{label:{show:!0,fontSize:"12",fontWeight:"bold"}},labelLine:{show:!0},data:[]}]}),pe=e=>({not_started:"未开始",in_progress:"进行中",paused:"已暂停",completed:"已完成",closed:"已关闭"}[e]||e||"-"),fe=e=>({test:"测试环境",staging:"预发环境",production:"正式环境"}[e]||e),me=e=>({high:"高",medium:"中",low:"低"}[e]||e),he=e=>e?k(e).format("YYYY-MM-DD HH:mm:ss"):"-",_e=()=>{const e=re.value.bug_stats||{};ue.value.series[0].data=[{value:e.high||0,name:"高优先级"},{value:e.medium||0,name:"中优先级"},{value:e.low||0,name:"低优先级"}];const a=re.value.case_stats||{};ce.value.series[0].data=[{value:a.passed||0,name:"通过"},{value:a.failed||0,name:"失败"},{value:a.blocked||0,name:"阻塞"},{value:a.not_applicable||0,name:"不适用"},{value:a.not_run||0,name:"未执行"}];const t=(re.value.iteration_stats||{}).iterations||[];if(t.length>0){const e={"进行中":0,"已完成":0,"已关闭":0};t.forEach(a=>{const t=a.status||"进行中";e[t],e[t]++}),ve.value.series[0].data=Object.entries(e).filter(([e,a])=>a>0).map(([e,a])=>({name:e,value:a}))}else ve.value.series[0].data=[{name:"暂无数据",value:1}]};d(re,()=>{_e()},{deep:!0});const be=()=>{de.push("/projects")},ge=()=>{h.info("编辑功能待实现")};return u(()=>{(async()=>{ie.value=!0;try{const e=ne.params.id,a=await S(e);re.value=a.project||{}}catch(e){console.error("获取项目详情失败:",e),h.error("获取项目详情失败"),re.value={}}finally{ie.value=!1,_e()}})()}),(i,r)=>{const n=j,d=z,u=o,h=l,S=s,k=t,E=e,L=a;return c(),v("div",R,[p("div",H,[f(k,{shadow:"hover",class:"info-card"},{header:m(()=>[p("div",q,[p("h2",null,"项目名称: "+_(re.value.project_name||"未知项目"),1),p("div",B,[f(d,{type:"primary",onClick:ge},{default:m(()=>[f(n,null,{default:m(()=>[f(b(g))]),_:1}),r[0]||(r[0]=w(" 编辑 ",-1))]),_:1}),f(d,{onClick:be},{default:m(()=>[f(n,null,{default:m(()=>[f(b(y))]),_:1}),r[1]||(r[1]=w(" 返回列表 ",-1))]),_:1})])])]),default:m(()=>[f(S,{column:2,border:""},{default:m(()=>[f(h,{label:"状态"},{default:m(()=>{return[f(u,{type:(e=re.value.status,{not_started:"info",in_progress:"success",paused:"warning",completed:"success",closed:"danger"}[e]||"info")},{default:m(()=>[w(_(pe(re.value.status)),1)]),_:1},8,["type"])];var e}),_:1}),f(h,{label:"环境"},{default:m(()=>{return[f(u,{type:(e=re.value.environment,{test:"info",staging:"warning",production:"success"}[e]||"info")},{default:m(()=>[w(_(fe(re.value.environment)||"-"),1)]),_:1},8,["type"])];var e}),_:1}),f(h,{label:"优先级"},{default:m(()=>{return[f(u,{type:(e=re.value.priority,{high:"danger",medium:"warning",low:"success"}[e]||"info")},{default:m(()=>[w(_(me(re.value.priority)||"-"),1)]),_:1},8,["type"])];var e}),_:1}),f(h,{label:"负责人"},{default:m(()=>[w(_(re.value.owner_name||"-"),1)]),_:1}),f(h,{label:"开始日期"},{default:m(()=>[w(_(he(re.value.start_date)),1)]),_:1}),f(h,{label:"结束日期"},{default:m(()=>[w(_(he(re.value.end_date)),1)]),_:1}),f(h,{label:"创建时间"},{default:m(()=>[w(_(he(re.value.created_at)),1)]),_:1}),f(h,{label:"更新时间"},{default:m(()=>[w(_(he(re.value.updated_at)),1)]),_:1})]),_:1})]),_:1})]),p("div",F,[f(k,{shadow:"hover",class:"info-card"},{header:m(()=>[...r[2]||(r[2]=[p("div",{class:"card-header"},[p("span",null,"项目描述")],-1)])]),default:m(()=>[p("div",I,_(re.value.description||"暂无描述"),1)]),_:1})]),p("div",J,[f(k,{shadow:"hover",class:"info-card"},{header:m(()=>[...r[3]||(r[3]=[p("div",{class:"card-header"},[p("span",null,"项目链接")],-1)])]),default:m(()=>[f(S,{column:1,border:"","label-width":"140px"},{default:m(()=>[f(h,{label:"文档链接"},{default:m(()=>[re.value.doc_url?(c(),v("a",{key:0,href:re.value.doc_url,target:"_blank",class:"project-link"},_(re.value.doc_url),9,N)):(c(),v("span",P,"-"))]),_:1}),f(h,{label:"流水线链接"},{default:m(()=>[re.value.pipeline_url?(c(),v("a",{key:0,href:re.value.pipeline_url,target:"_blank",class:"project-link"},_(re.value.pipeline_url),9,A)):(c(),v("span",K,"-"))]),_:1})]),_:1})]),_:1})]),p("div",Q,[f(k,{shadow:"hover",class:"info-card"},{header:m(()=>[...r[4]||(r[4]=[p("div",{class:"card-header"},[p("span",null,"项目统计")],-1)])]),default:m(()=>[f(L,{gutter:20,class:"stats-overview"},{default:m(()=>[f(E,{span:8},{default:m(()=>{var e;return[p("div",T,[p("div",U,[r[5]||(r[5]=p("div",{class:"stat-label"},"缺陷总数",-1)),p("div",V,_((null==(e=re.value.bug_stats)?void 0:e.total)||0),1)]),p("div",X,[f(b(x),{option:ue.value,autoresize:""},null,8,["option"])])])]}),_:1}),f(E,{span:8},{default:m(()=>{var e;return[p("div",Z,[p("div",$,[r[6]||(r[6]=p("div",{class:"stat-label"},"用例总数",-1)),p("div",ee,_((null==(e=re.value.case_stats)?void 0:e.total)||0),1)]),p("div",ae,[f(b(x),{option:ce.value,autoresize:""},null,8,["option"])])])]}),_:1}),f(E,{span:8},{default:m(()=>{var e;return[p("div",te,[p("div",le,[r[7]||(r[7]=p("div",{class:"stat-label"},"迭代总数",-1)),p("div",se,_((null==(e=re.value.iteration_stats)?void 0:e.total)||0),1)]),p("div",oe,[f(b(x),{option:ve.value,autoresize:""},null,8,["option"])])])]}),_:1})]),_:1})]),_:1})])])}}},[["__scopeId","data-v-d1d8d751"]]);export{ie as default};
