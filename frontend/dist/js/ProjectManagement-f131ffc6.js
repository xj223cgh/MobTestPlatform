/* empty css                  */import{v as e}from"./el-loading-89207824.js";import{E as a,a as l,b as t}from"./el-table-column-fbece626.js";import{E as r}from"./el-tag-611fc351.js";import{a as o,E as n}from"./el-select-9396c850.js";import"./el-scrollbar-68fecf97.js";import{E as i,a as s}from"./el-input-320f57dc.js";import"./el-checkbox-b9bd0a97.js";import"./el-tooltip-4ed993c7.js";import{r as u,u as d,b as p,o as c,c as m,d as v,e as g,f,w as _,a5 as b,J as w,n as h,l as y,h as j,aB as C,j as x,i as z,aC as V,aD as k,L as P,E,k as S}from"./index-ea26c5b6.js";import{g as U}from"./project-2db8b4c7.js";import{d as Y}from"./dayjs.min-075d2e4a.js";import{_ as D}from"./_plugin-vue_export-helper-1b428a4d.js";import"./omit-2fc30497.js";import"./castArray-7303869c.js";import"./strings-836bc6fd.js";import"./raf-45c3df72.js";const H={class:"project-management"},M={class:"page-header"},$={class:"header-actions"},A={class:"search-section"},B={class:"table-section"},I={class:"operation-buttons"},J={class:"fixed-pagination"},K=D({__name:"ProjectManagement",setup(D){const K=u(!1),q=u([]),L=d(),F=u(""),G=u(""),N=u(""),O=u(""),Q=p({}),R=p({currentPage:1,pageSize:10,total:0}),T=e=>e?Y(e).format("YYYY-MM-DD HH:mm:ss"):"-",W=e=>({not_started:"未开始",in_progress:"进行中",paused:"已暂停",completed:"已完成",closed:"已关闭"}[e]||e||"-"),X=e=>({test:"测试环境",staging:"预发环境",production:"正式环境"}[e]||e),Z=e=>({high:"高",medium:"中",low:"低"}[e]||e),ee=async()=>{K.value=!0;try{const e={page:R.currentPage,size:R.pageSize,search:F.value,status:G.value,environment:N.value,priority:O.value},a=await U(e);q.value=a.projects||[],R.total=a.total||0}catch(e){console.error("获取项目列表失败:",e),h.error("获取项目列表失败"),q.value=[],R.total=0}finally{K.value=!1}},ae=()=>{F.value="",G.value="",N.value="",O.value="",R.currentPage=1,ee()},le=e=>{R.pageSize=e,R.currentPage=1,ee()},te=e=>{R.currentPage=e,ee()},re=()=>{h.info("创建项目功能待实现")};return c(()=>{ee()}),(u,d)=>{const p=E,c=y,U=S,Y=s,D=o,oe=n,ne=i,ie=t,se=r,ue=a,de=l,pe=e;return m(),v("div",H,[g("div",M,[d[5]||(d[5]=g("div",{class:"header-content"},[g("h1",null,"项目管理"),g("p",{class:"description"},"管理系统项目信息")],-1)),g("div",$,[f(c,{type:"primary",onClick:re,loading:K.value},{default:_(()=>[f(p,null,{default:_(()=>[f(j(C))]),_:1}),d[4]||(d[4]=x(" 创建项目 ",-1))]),_:1},8,["loading"])])]),g("div",A,[f(ne,{model:Q,inline:""},{default:_(()=>[f(Y,{label:"项目名称"},{default:_(()=>[f(U,{modelValue:F.value,"onUpdate:modelValue":d[0]||(d[0]=e=>F.value=e),placeholder:"请输入项目名称",clearable:"",onClear:ee,onKeyup:z(ee,["enter"]),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),f(Y,{label:"状态"},{default:_(()=>[f(oe,{modelValue:G.value,"onUpdate:modelValue":d[1]||(d[1]=e=>G.value=e),placeholder:"全部状态",clearable:"",onClear:ee,style:{width:"120px"}},{default:_(()=>[f(D,{label:"全部",value:""}),f(D,{label:"未开始",value:"not_started"}),f(D,{label:"进行中",value:"in_progress"}),f(D,{label:"已暂停",value:"paused"}),f(D,{label:"已完成",value:"completed"}),f(D,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),f(Y,{label:"环境"},{default:_(()=>[f(oe,{modelValue:N.value,"onUpdate:modelValue":d[2]||(d[2]=e=>N.value=e),placeholder:"全部环境",clearable:"",onClear:ee,style:{width:"120px"}},{default:_(()=>[f(D,{label:"全部",value:""}),f(D,{label:"测试环境",value:"test"}),f(D,{label:"预发环境",value:"staging"}),f(D,{label:"正式环境",value:"production"})]),_:1},8,["modelValue"])]),_:1}),f(Y,{label:"优先级"},{default:_(()=>[f(oe,{modelValue:O.value,"onUpdate:modelValue":d[3]||(d[3]=e=>O.value=e),placeholder:"全部优先级",clearable:"",onClear:ee,style:{width:"120px"}},{default:_(()=>[f(D,{label:"全部",value:""}),f(D,{label:"高",value:"high"}),f(D,{label:"中",value:"medium"}),f(D,{label:"低",value:"low"})]),_:1},8,["modelValue"])]),_:1}),f(Y,null,{default:_(()=>[f(c,{type:"primary",onClick:ee,loading:K.value},{default:_(()=>[f(p,null,{default:_(()=>[f(j(V))]),_:1}),d[6]||(d[6]=x(" 搜索 ",-1))]),_:1},8,["loading"]),f(c,{onClick:ae,loading:K.value},{default:_(()=>[f(p,null,{default:_(()=>[f(j(k))]),_:1}),d[7]||(d[7]=x(" 重置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),g("div",B,[b((m(),w(ue,{data:q.value,stripe:"",border:"",style:{width:"100%"},fit:""},{default:_(()=>[f(ie,{prop:"project_name",label:"项目名称","min-width":"180",fixed:"left",align:"center"},{default:_(e=>[x(P(e.row.project_name||"-"),1)]),_:1}),f(ie,{prop:"status",label:"状态","min-width":"80",align:"center"},{default:_(e=>{return[f(se,{type:(a=e.row.status,{not_started:"info",in_progress:"success",paused:"warning",completed:"success",closed:"danger"}[a]||"info")},{default:_(()=>[x(P(W(e.row.status)),1)]),_:2},1032,["type"])];var a}),_:1}),f(ie,{prop:"environment",label:"环境","min-width":"80",align:"center"},{default:_(e=>{return[f(se,{type:(a=e.row.environment,{test:"info",staging:"warning",production:"success"}[a]||"info")},{default:_(()=>[x(P(X(e.row.environment)||"-"),1)]),_:2},1032,["type"])];var a}),_:1}),f(ie,{prop:"priority",label:"优先级","min-width":"80",align:"center"},{default:_(e=>{return[f(se,{type:(a=e.row.priority,{high:"danger",medium:"warning",low:"success"}[a]||"info")},{default:_(()=>[x(P(Z(e.row.priority)||"-"),1)]),_:2},1032,["type"])];var a}),_:1}),f(ie,{prop:"owner_name",label:"负责人","min-width":"100",align:"center"},{default:_(e=>[x(P(e.row.owner_name||"-"),1)]),_:1}),f(ie,{label:"缺陷总数","min-width":"80",align:"center"},{default:_(e=>{var a;return[x(P((null==(a=e.row.bug_stats)?void 0:a.total)||0),1)]}),_:1}),f(ie,{label:"用例总数","min-width":"80",align:"center"},{default:_(e=>{var a;return[x(P((null==(a=e.row.case_stats)?void 0:a.total)||0),1)]}),_:1}),f(ie,{label:"开始日期","min-width":"120",align:"center"},{default:_(e=>[x(P(T(e.row.start_date)),1)]),_:1}),f(ie,{label:"结束日期","min-width":"120",align:"center"},{default:_(e=>[x(P(T(e.row.end_date)),1)]),_:1}),f(ie,{label:"操作","min-width":"180",fixed:"right",align:"center"},{default:_(e=>[g("div",I,[f(c,{type:"primary",size:"small",onClick:a=>{return l=e.row,void L.push(`/projects/${l.id}`);var l}},{default:_(()=>[...d[8]||(d[8]=[x("查看",-1)])]),_:1},8,["onClick"]),f(c,{type:"warning",size:"small",onClick:a=>{return l=e.row,void h.info(`编辑项目: ${l.project_name}`);var l}},{default:_(()=>[...d[9]||(d[9]=[x("编辑",-1)])]),_:1},8,["onClick"]),f(c,{type:"danger",size:"small",onClick:a=>{return l=e.row,void h.info(`删除项目: ${l.project_name}`);var l},disabled:e.row.is_owner},{default:_(()=>[...d[10]||(d[10]=[x("删除",-1)])]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["data"])),[[pe,K.value]])]),g("div",J,[f(de,{"current-page":"pagination.currentPage","page-size":"pagination.pageSize","page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:R.total,onSizeChange:le,onCurrentChange:te},null,8,["total"])])])}}},[["__scopeId","data-v-abc22b4a"]]);export{K as default};
