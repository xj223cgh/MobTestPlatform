/* empty css                  *//* empty css                   */import{E as e}from"./el-pagination-aa6134da.js";import{E as a}from"./el-tag-418c1d1c.js";import{a as l,E as t}from"./el-select-b829cea3.js";import"./el-scrollbar-0528a0c4.js";import{E as r,a as o}from"./el-input-89ea148f.js";import{E as i,a as s}from"./el-table-column-5340bcc8.js";import"./el-checkbox-14904d7f.js";import"./el-tooltip-4ed993c7.js";import{r as n,u as d,b as u,o as p,c,d as m,e as g,f,w as v,a5 as _,J as w,n as h,l as b,h as j,aB as y,j as C,i as x,aC as z,aD as k,L as V,E as P,k as E}from"./index-cd351671.js";import{g as D}from"./project-79976e72.js";import{d as S}from"./dayjs.min-fd58e32d.js";import{_ as M}from"./_plugin-vue_export-helper-1b428a4d.js";import{v as Y}from"./directive-1c779a20.js";import"./strings-b003b1cc.js";import"./castArray-824cd328.js";import"./omit-7b0b3aa9.js";import"./raf-907dd12a.js";const I={class:"project-management"},U={class:"page-header"},$={class:"header-actions"},B={class:"search-section"},H={class:"table-section"},J={class:"operation-buttons"},K={class:"fixed-pagination"},L=M({__name:"ProjectManagement",setup(M){const L=n(!1),A=n([]),F=d(),N=n(""),q=n(""),G=n(""),O=u({}),Q=u({currentPage:1,pageSize:10,total:0}),R=e=>e?S(e).format("YYYY-MM-DD HH:mm:ss"):"-",T=e=>({not_started:"未开始",in_progress:"进行中",paused:"已暂停",completed:"已完成",closed:"已关闭"}[e]||e||"-"),W=e=>({high:"高",medium:"中",low:"低"}[e]||e),X=async()=>{var e,a;L.value=!0;try{const l={page:Q.currentPage,size:Q.pageSize,search:N.value,status:q.value,priority:G.value},t=await D(l);A.value=(null==(e=t.data)?void 0:e.items)||[],Q.total=(null==(a=t.data)?void 0:a.total)||0}catch(l){console.error("获取项目列表失败:",l),h.error("获取项目列表失败"),A.value=[],Q.total=0}finally{L.value=!1}},Z=()=>{N.value="",q.value="",G.value="",Q.currentPage=1,X()},ee=e=>{Q.pageSize=e,Q.currentPage=1,X()},ae=e=>{Q.currentPage=e,X()},le=()=>{h.info("创建项目功能待实现")};return p(()=>{X()}),(n,d)=>{const u=P,p=b,D=E,S=o,M=l,te=t,re=r,oe=s,ie=a,se=i,ne=e,de=Y;return c(),m("div",I,[g("div",U,[d[4]||(d[4]=g("div",{class:"header-content"},[g("h1",null,"项目管理"),g("p",{class:"description"},"管理系统项目信息")],-1)),g("div",$,[f(p,{type:"primary",onClick:le,loading:L.value},{default:v(()=>[f(u,null,{default:v(()=>[f(j(y))]),_:1}),d[3]||(d[3]=C(" 创建项目 ",-1))]),_:1},8,["loading"])])]),g("div",B,[f(re,{model:O,inline:""},{default:v(()=>[f(S,{label:"项目名称"},{default:v(()=>[f(D,{modelValue:N.value,"onUpdate:modelValue":d[0]||(d[0]=e=>N.value=e),placeholder:"请输入项目名称",clearable:"",onClear:X,onKeyup:x(X,["enter"]),style:{width:"200px"}},null,8,["modelValue"])]),_:1}),f(S,{label:"状态"},{default:v(()=>[f(te,{modelValue:q.value,"onUpdate:modelValue":d[1]||(d[1]=e=>q.value=e),placeholder:"全部状态",clearable:"",onClear:X,style:{width:"120px"}},{default:v(()=>[f(M,{label:"全部",value:""}),f(M,{label:"未开始",value:"not_started"}),f(M,{label:"进行中",value:"in_progress"}),f(M,{label:"已暂停",value:"paused"}),f(M,{label:"已完成",value:"completed"}),f(M,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),f(S,{label:"优先级"},{default:v(()=>[f(te,{modelValue:G.value,"onUpdate:modelValue":d[2]||(d[2]=e=>G.value=e),placeholder:"全部优先级",clearable:"",onClear:X,style:{width:"120px"}},{default:v(()=>[f(M,{label:"全部",value:""}),f(M,{label:"高",value:"high"}),f(M,{label:"中",value:"medium"}),f(M,{label:"低",value:"low"})]),_:1},8,["modelValue"])]),_:1}),f(S,null,{default:v(()=>[f(p,{type:"primary",onClick:X,loading:L.value},{default:v(()=>[f(u,null,{default:v(()=>[f(j(z))]),_:1}),d[5]||(d[5]=C(" 搜索 ",-1))]),_:1},8,["loading"]),f(p,{onClick:Z,loading:L.value},{default:v(()=>[f(u,null,{default:v(()=>[f(j(k))]),_:1}),d[6]||(d[6]=C(" 重置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),g("div",H,[_((c(),w(se,{data:A.value,stripe:"",border:"",style:{width:"100%"},fit:""},{default:v(()=>[f(oe,{prop:"id",label:"项目ID",type:"index",width:"100",fixed:"left",align:"center"}),f(oe,{prop:"project_name",label:"项目名称","min-width":"150",fixed:"left",align:"center"},{default:v(e=>[C(V(e.row.project_name||"-"),1)]),_:1}),f(oe,{prop:"status",label:"状态","min-width":"80",align:"center"},{default:v(e=>{return[f(ie,{type:(a=e.row.status,{not_started:"info",in_progress:"success",paused:"warning",completed:"success",closed:"danger"}[a]||"info")},{default:v(()=>[C(V(T(e.row.status)),1)]),_:2},1032,["type"])];var a}),_:1}),f(oe,{prop:"priority",label:"优先级","min-width":"80",align:"center"},{default:v(e=>{return[f(ie,{type:(a=e.row.priority,{high:"danger",medium:"warning",low:"success"}[a]||"info")},{default:v(()=>[C(V(W(e.row.priority)||"-"),1)]),_:2},1032,["type"])];var a}),_:1}),f(oe,{prop:"creator_name",label:"创建者","min-width":"100",align:"center"},{default:v(e=>[C(V(e.row.creator_name||"-"),1)]),_:1}),f(oe,{prop:"owner_name",label:"负责人","min-width":"100",align:"center"},{default:v(e=>[C(V(e.row.owner_name||"-"),1)]),_:1}),f(oe,{label:"开始日期","min-width":"120",align:"center"},{default:v(e=>[C(V(R(e.row.start_date)),1)]),_:1}),f(oe,{label:"结束日期","min-width":"120",align:"center"},{default:v(e=>[C(V(R(e.row.end_date)),1)]),_:1}),f(oe,{label:"操作","min-width":"190",fixed:"right",align:"center"},{default:v(e=>[g("div",J,[f(p,{type:"primary",size:"small",onClick:a=>{return l=e.row,void F.push(`/projects/${l.id}`);var l}},{default:v(()=>[...d[7]||(d[7]=[C("查看",-1)])]),_:1},8,["onClick"]),f(p,{type:"success",size:"small",onClick:a=>{return l=e.row,void h.info(`编辑项目: ${l.project_name}`);var l}},{default:v(()=>[...d[8]||(d[8]=[C("编辑",-1)])]),_:1},8,["onClick"]),f(p,{type:"danger",size:"small",onClick:a=>{return l=e.row,void h.info(`删除项目: ${l.project_name}`);var l},disabled:e.row.is_owner},{default:v(()=>[...d[9]||(d[9]=[C("删除",-1)])]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["data"])),[[de,L.value]])]),g("div",K,[f(ne,{"current-page":"pagination.currentPage","page-size":"pagination.pageSize","page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:Q.total,onSizeChange:ee,onCurrentChange:ae},null,8,["total"])])])}}},[["__scopeId","data-v-3a85ae47"]]);export{L as default};
