/* empty css                  */import{v as t}from"./el-loading-89207824.js";import{E as e}from"./el-link-a4b32e17.js";import"./el-tag-611fc351.js";import{E as a,a as s}from"./el-select-9396c850.js";import"./el-scrollbar-68fecf97.js";import{H as i}from"./index.esm.min-ba355b4d.js";import{d as l}from"./dayjs.min-075d2e4a.js";import{ax as r,r as o,b as c,W as d,o as n,an as v,c as u,d as m,e as p,f as y,w as h,a5 as f,L as b,h as w,a7 as g,ap as _,n as D,E as j,l as k,j as C,F as x,J as A,K as S}from"./index-ea26c5b6.js";import{_ as E}from"./_plugin-vue_export-helper-1b428a4d.js";import{u as L,i as T,a as F,b as M,c as P,d as H,e as W}from"./install-39169bdd.js";import{i as Y}from"./install-400724a6.js";import"./strings-836bc6fd.js";import"./castArray-7303869c.js";const U={class:"home"},V={class:"page-header"},z={class:"actions"},G={class:"stats-grid"},O={class:"stat-card"},B={class:"stat-icon primary"},I={class:"stat-content"},J={class:"stat-number"},K={class:"stat-card"},R={class:"stat-icon success"},q={class:"stat-content"},N={class:"stat-number"},Q={class:"stat-card"},X={class:"stat-icon danger"},Z={class:"stat-content"},$={class:"stat-number"},tt={class:"charts-grid"},et={class:"chart-card"},at={class:"chart-header"},st={class:"chart-container"},it={class:"chart-card"},lt={class:"chart-container"},rt={class:"activity-section"},ot={class:"card"},ct={class:"card-header"},dt={class:"activity-list"},nt={class:"activity-content"},vt={class:"activity-title"},ut={class:"activity-desc"},mt={class:"activity-time"},pt=E({__name:"Home",setup(E){L([T,Y,F,M,P,H,W]);const pt=o(!1),yt=c({users:0,devices:0,testTasks:0}),ht=o("7d"),ft=o([]),bt=d(()=>({title:{show:!1},tooltip:{trigger:"axis"},legend:{data:["完成任务","失败任务","进行中任务"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"完成任务",type:"line",smooth:!0,data:[12,13,10,13,9,23,21],itemStyle:{color:"#67C23A"}},{name:"失败任务",type:"line",smooth:!0,data:[5,3,7,2,4,6,3],itemStyle:{color:"#F56C6C"}},{name:"进行中任务",type:"line",smooth:!0,data:[8,12,15,10,13,11,14],itemStyle:{color:"#E6A23C"}}]})),wt=d(()=>({title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"设备状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:335,name:"在线",itemStyle:{color:"#67C23A"}},{value:310,name:"离线",itemStyle:{color:"#909399"}},{value:234,name:"忙碌",itemStyle:{color:"#E6A23C"}},{value:135,name:"维护",itemStyle:{color:"#F56C6C"}}]}]})),gt=async()=>{try{const t=await r({url:"/home/stats",method:"get"});200===t.code?Object.assign(yt,t.data):(yt.users=156,yt.devices=42,yt.testTasks=324)}catch(t){console.error("获取统计数据失败:",t),yt.users=156,yt.devices=42,yt.testTasks=324}},_t=async()=>{try{const t=await function(t={}){return r({url:"/home/activities",method:"get",params:t})}({limit:10});200===t.code?ft.value=t.data:ft.value=[{id:1,type:"task",title:"测试任务完成",description:"Android登录功能测试任务已成功完成",created_at:new Date(Date.now()-3e5)},{id:2,type:"device",title:"设备上线",description:"设备 iPhone 14 Pro 已连接并上线",created_at:new Date(Date.now()-9e5)},{id:3,type:"bug",title:"发现新缺陷",description:"在支付模块中发现严重缺陷",created_at:new Date(Date.now()-18e5)},{id:4,type:"user",title:"新用户注册",description:"测试工程师 张三 已注册账号",created_at:new Date(Date.now()-36e5)}]}catch(t){console.error("获取最近活动失败:",t),ft.value=[{id:1,type:"task",title:"测试任务完成",description:"Android登录功能测试任务已成功完成",created_at:new Date(Date.now()-3e5)},{id:2,type:"device",title:"设备上线",description:"设备 iPhone 14 Pro 已连接并上线",created_at:new Date(Date.now()-9e5)},{id:3,type:"bug",title:"发现新缺陷",description:"在支付模块中发现严重缺陷",created_at:new Date(Date.now()-18e5)},{id:4,type:"user",title:"新用户注册",description:"测试工程师 张三 已注册账号",created_at:new Date(Date.now()-36e5)}]}},Dt=async()=>{pt.value=!0;try{await Promise.all([gt(),_t()]),D.success("数据刷新成功")}catch(t){D.error("数据刷新失败")}finally{pt.value=!1}},jt=()=>{D.info("查看全部活动功能待完善")};return n(()=>{Dt()}),(r,o)=>{const c=v("Refresh"),d=j,n=k,D=v("User"),E=v("Monitor"),L=v("List"),T=s,F=a,M=e,P=t;return u(),m("div",U,[p("div",V,[o[2]||(o[2]=p("h1",{class:"title"},"首页",-1)),p("div",z,[y(n,{type:"primary",onClick:Dt},{default:h(()=>[y(d,null,{default:h(()=>[y(c)]),_:1}),o[1]||(o[1]=C(" 刷新数据 ",-1))]),_:1})])]),p("div",G,[f((u(),m("div",O,[p("div",B,[y(d,null,{default:h(()=>[y(D)]),_:1})]),p("div",I,[p("div",J,b(yt.users),1),o[3]||(o[3]=p("div",{class:"stat-label"},"用户总数",-1))])])),[[P,pt.value]]),f((u(),m("div",K,[p("div",R,[y(d,null,{default:h(()=>[y(E)]),_:1})]),p("div",q,[p("div",N,b(yt.devices),1),o[4]||(o[4]=p("div",{class:"stat-label"},"设备总数",-1))])])),[[P,pt.value]]),f((u(),m("div",Q,[p("div",X,[y(d,null,{default:h(()=>[y(L)]),_:1})]),p("div",Z,[p("div",$,b(yt.testTasks),1),o[5]||(o[5]=p("div",{class:"stat-label"},"测试任务",-1))])])),[[P,pt.value]])]),p("div",tt,[p("div",et,[p("div",at,[o[6]||(o[6]=p("h3",null,"测试任务趋势",-1)),y(F,{modelValue:ht.value,"onUpdate:modelValue":o[0]||(o[0]=t=>ht.value=t),size:"small",style:{width:"120px"}},{default:h(()=>[y(T,{label:"最近7天",value:"7d"}),y(T,{label:"最近30天",value:"30d"}),y(T,{label:"最近90天",value:"90d"})]),_:1},8,["modelValue"])]),p("div",st,[y(w(i),{class:"chart",option:bt.value},null,8,["option"])])]),p("div",it,[o[7]||(o[7]=p("div",{class:"chart-header"},[p("h3",null,"设备状态分布")],-1)),p("div",lt,[y(w(i),{class:"chart",option:wt.value},null,8,["option"])])])]),p("div",rt,[p("div",ot,[p("div",ct,[o[9]||(o[9]=p("h3",null,"最近活动",-1)),y(M,{type:"primary",onClick:jt},{default:h(()=>[...o[8]||(o[8]=[C("查看全部",-1)])]),_:1})]),p("div",dt,[(u(!0),m(g,null,_(ft.value,t=>{return u(),m("div",{key:t.id,class:"activity-item"},[p("div",{class:x(["activity-icon",t.type])},[y(d,null,{default:h(()=>{return[(u(),A(S((e=t.type,{task:"List",device:"Monitor",user:"User",bug:"Warning"}[e]||"Document"))))];var e}),_:2},1024)],2),p("div",nt,[p("div",vt,b(t.title),1),p("div",ut,b(t.description),1),p("div",mt,b((e=t.created_at,l(e).format("YYYY-MM-DD HH:mm:ss"))),1)])]);var e}),128))])])])])}}},[["__scopeId","data-v-bd2ee504"]]);export{pt as default};
