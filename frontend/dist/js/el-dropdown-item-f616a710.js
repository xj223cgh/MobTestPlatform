import{_ as e,z as o,D as t,r as n,C as r,I as l,o as a,h as i,a2 as s,x as d,G as u,O as c,P as p,W as f,bH as m,am as v,a1 as g,b9 as b,bI as w,a9 as h,an as y,c as I,J as E,w as C,f as S,bA as F,bB as T,y as _,l as R,E as k,Z as B,H as x,B as O,A as K,aS as M,b1 as P,aP as A,d as D,bg as G,R as $,F as z,aq as N,e as L,K as H,g as j,a7 as J,bJ as U,aU as Y,M as W,N as q}from"./index-ea26c5b6.js";import{u as V,b as Z,r as Q,c as X,E as ee,O as oe}from"./el-scrollbar-68fecf97.js";import{c as te}from"./castArray-7303869c.js";import{c as ne}from"./refs-9112775b.js";var re=e(o({inheritAttrs:!1}),[["render",function(e,o,n,r,l,a){return t(e.$slots,"default")}],["__file","collection.vue"]]);var le=e(o({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,o,n,r,l,a){return t(e.$slots,"default")}],["__file","collection-item.vue"]]);const ae="data-el-collection-item",ie=d({style:{type:u([String,Array,Object])},currentTabId:{type:u(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:u(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:se,ElCollectionItem:de,COLLECTION_INJECTION_KEY:ue,COLLECTION_ITEM_INJECTION_KEY:ce}=(e=>{const o=`El${e}Collection`,t=`${o}Item`,d=Symbol(o),u=Symbol(t),c={...re,name:o,setup(){const e=n(),o=new Map;r(d,{itemMap:o,getItems:()=>{const t=i(e);if(!t)return[];const n=Array.from(t.querySelectorAll(`[${ae}]`));return[...o.values()].sort((e,o)=>n.indexOf(e.ref)-n.indexOf(o.ref))},collectionRef:e})}},p={...le,name:t,setup(e,{attrs:o}){const t=n(),c=l(d,void 0);r(u,{collectionItemRef:t}),a(()=>{const e=i(t);e&&c.itemMap.set(e,{ref:e,...o})}),s(()=>{const e=i(t);c.itemMap.delete(e)})}};return{COLLECTION_INJECTION_KEY:d,COLLECTION_ITEM_INJECTION_KEY:u,ElCollection:c,ElCollectionItem:p}})("RovingFocusGroup"),pe=Symbol("elRovingFocusGroup"),fe=Symbol("elRovingFocusGroupItem"),me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ve=(e,o,t)=>{const n=((e,o)=>{if("rtl"!==o)return e;switch(e){case p.right:return p.left;case p.left:return p.right;default:return e}})(c(e),t);if(!("vertical"===o&&[p.left,p.right].includes(n)||"horizontal"===o&&[p.up,p.down].includes(n)))return me[n]},ge=e=>{const{activeElement:o}=document;for(const t of e){if(t===o)return;if(t.focus(),o!==document.activeElement)return}},be="currentTabIdChange",we="rovingFocusGroup.entryFocus",he={bubbles:!1,cancelable:!0},ye=o({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ie,emits:[be,"entryFocus"],setup(e,{emit:o}){var t;const a=n(null!=(t=e.currentTabId||e.defaultCurrentTabId)?t:null),s=n(!1),d=n(!1),u=n(),{getItems:c}=l(ue,void 0),p=f(()=>[{outline:"none"},e.style]),y=w(o=>{var t;null==(t=e.onMousedown)||t.call(e,o)},()=>{d.value=!0}),I=w(o=>{var t;null==(t=e.onFocus)||t.call(e,o)},e=>{const o=!i(d),{target:t,currentTarget:n}=e;if(t===n&&o&&!i(s)){const e=new Event(we,he);if(null==n||n.dispatchEvent(e),!e.defaultPrevented){const e=c().filter(e=>e.focusable),o=[e.find(e=>e.active),e.find(e=>e.id===i(a)),...e].filter(Boolean).map(e=>e.ref);ge(o)}}d.value=!1}),E=w(o=>{var t;null==(t=e.onBlur)||t.call(e,o)},()=>{s.value=!1});r(pe,{currentTabbedId:m(a),loop:v(e,"loop"),tabIndex:f(()=>i(s)?-1:0),rovingFocusGroupRef:u,rovingFocusGroupRootStyle:p,orientation:v(e,"orientation"),dir:v(e,"dir"),onItemFocus:e=>{o(be,e)},onItemShiftTab:()=>{s.value=!0},onBlur:E,onFocus:I,onMousedown:y,onKeydown:o=>{const t=ve(o);if(t){o.preventDefault();let l=c().filter(e=>e.focusable).map(e=>e.ref);switch(t){case"last":l.reverse();break;case"prev":case"next":{"prev"===t&&l.reverse();const a=l.indexOf(o.currentTarget);l=e.loop?(r=a+1,(n=l).map((e,o)=>n[(o+r)%n.length])):l.slice(a+1);break}}h(()=>{ge(l)})}var n,r}}),g(()=>e.currentTabId,e=>{a.value=null!=e?e:null}),b(u,we,(...e)=>{o("entryFocus",...e)})}});var Ie=e(o({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:se,ElRovingFocusGroupImpl:e(ye,[["render",function(e,o,n,r,l,a){return t(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,o,n,r,l,a){const i=y("el-roving-focus-group-impl"),s=y("el-focus-group-collection");return I(),E(s,null,{default:C(()=>[S(i,F(T(e.$attrs)),{default:C(()=>[t(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]);const Ee=d({trigger:{...V.trigger,type:u([String,Array])},triggerKeys:{type:u(Array),default:()=>[p.enter,p.numpadEnter,p.space,p.down]},virtualTriggering:V.virtualTriggering,virtualRef:V.virtualRef,effect:{...Z.effect,default:"light"},type:{type:u(String)},placement:{type:u(String),default:"bottom"},popperOptions:{type:u(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:u([Number,String]),default:0},maxHeight:{type:u([Number,String]),default:""},popperClass:Z.popperClass,popperStyle:Z.popperStyle,disabled:Boolean,role:{type:String,values:Q,default:"menu"},buttonProps:{type:u(Object)},teleported:Z.teleported,persistent:{type:Boolean,default:!0}}),Ce=d({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:_}}),Se=d({onKeydown:{type:u(Function)}}),Fe=Symbol("elDropdown"),Te="elDropdown",{ButtonGroup:_e}=R;var Re=e(o({name:"ElDropdown",components:{ElButton:R,ElButtonGroup:_e,ElScrollbar:X,ElTooltip:ee,ElRovingFocusGroup:Ie,ElOnlyChild:oe,ElIcon:k,ArrowDown:B},props:Ee,emits:["visible-change","click","command"],setup(e,{emit:o}){const t=x(),l=O("dropdown"),{t:a}=K(),s=n(),d=n(),u=n(),c=n(),p=n(null),m=n(null),g=n(!1),b=f(()=>({maxHeight:M(e.maxHeight)})),w=f(()=>[l.m(C.value)]),h=f(()=>te(e.trigger)),y=P().value,I=f(()=>e.id||y);function E(){var e;null==(e=u.value)||e.onClose()}const C=A();r(Fe,{contentRef:c,role:f(()=>e.role),triggerId:I,isUsingKeyboard:g,onItemEnter:function(){},onItemLeave:function(){const e=i(c);h.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),m.value=null},handleClose:E}),r(Te,{instance:t,dropdownSize:C,handleClick:function(){var e;null==(e=u.value)||e.onClose(void 0,0)},commandHandler:function(...e){o("command",...e)},trigger:v(e,"trigger"),hideOnClick:v(e,"hideOnClick")});return{t:a,ns:l,scrollbar:p,wrapStyle:b,dropdownTriggerKls:w,dropdownSize:C,triggerId:I,currentTabId:m,handleCurrentTabIdChange:function(e){m.value=e},handlerMainButtonClick:e=>{o("click",e)},handleClose:E,handleOpen:function(){var e;null==(e=u.value)||e.onOpen()},handleBeforeShowTooltip:function(){o("visible-change",!0)},handleShowTooltip:function(e){var o;g.value="keydown"===(null==e?void 0:e.type),null==(o=c.value)||o.focus()},handleBeforeHideTooltip:function(){o("visible-change",!1)},popperRef:u,contentRef:c,triggeringElementRef:s,referenceElementRef:d}}}),[["render",function(e,o,n,r,l,a){var i;const s=y("el-roving-focus-group"),d=y("el-scrollbar"),u=y("el-only-child"),c=y("el-tooltip"),p=y("el-button"),f=y("arrow-down"),m=y("el-icon"),v=y("el-button-group");return I(),D("div",{class:z([e.ns.b(),e.ns.is("disabled",e.disabled)])},[S(c,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(i=e.virtualRef)?i:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},G({content:C(()=>[S(d,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:C(()=>[S(s,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:C(()=>[t(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:C(()=>[S(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:C(()=>[t(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(I(),E(v,{key:0},{default:C(()=>[S(p,$({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:C(()=>[t(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),S(p,$({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:C(()=>[S(m,{class:z(e.ns.e("icon"))},{default:C(()=>[S(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):N("v-if",!0)],2)}],["__file","dropdown.vue"]]);var ke=e(o({components:{ElRovingFocusCollectionItem:de},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:t,onItemFocus:a,onItemShiftTab:s,onKeydown:d}=l(pe,void 0),u=P(),m=n(),v=w(e=>{o("mousedown",e)},o=>{e.focusable?a(i(u)):o.preventDefault()}),g=w(e=>{o("focus",e)},()=>{a(i(u))}),b=w(e=>{o("keydown",e)},e=>{const{shiftKey:o,target:t,currentTarget:n}=e;c(e)===p.tab&&o?s():t===n&&d(e)}),h=f(()=>t.value===i(u));return r(fe,{rovingFocusGroupItemRef:m,tabIndex:f(()=>i(h)?0:-1),handleMousedown:v,handleFocus:g,handleKeydown:b}),{id:u,handleKeydown:b,handleFocus:g,handleMousedown:v}}}),[["render",function(e,o,n,r,l,a){const i=y("el-roving-focus-collection-item");return I(),E(i,{id:e.id,focusable:e.focusable,active:e.active},{default:C(()=>[t(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const Be=o({name:"DropdownItemImpl",components:{ElIcon:k},props:Ce,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const t=O("dropdown"),{role:n}=l(Fe,void 0),{collectionItemRef:r}=l(ce,void 0),{rovingFocusGroupItemRef:a,tabIndex:i,handleFocus:s,handleKeydown:d,handleMousedown:u}=l(fe,void 0),m=ne(r,a),v=f(()=>"menu"===n.value?"menuitem":"navigation"===n.value?"link":"button"),g=w(e=>{const t=c(e);if([p.enter,p.numpadEnter,p.space].includes(t))return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0},d);return{ns:t,itemRef:m,dataset:{[ae]:""},role:v,tabIndex:i,handleFocus:s,handleKeydown:g,handleMousedown:u}}});const xe=()=>{const e=l(Te,{}),o=f(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}};var Oe=e(o({name:"ElDropdownItem",components:{ElRovingFocusItem:ke,ElDropdownItemImpl:e(Be,[["render",function(e,o,n,r,l,a){const i=y("el-icon");return I(),D(J,null,[e.divided?(I(),D("li",{key:0,role:"separator",class:z(e.ns.bem("menu","item","divided"))},null,2)):N("v-if",!0),L("li",$({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o=>e.$emit("clickimpl",o),onFocus:e.handleFocus,onKeydown:j(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:o=>e.$emit("pointermove",o),onPointerleave:o=>e.$emit("pointerleave",o)}),[e.icon?(I(),E(i,{key:0},{default:C(()=>[(I(),E(H(e.icon)))]),_:1})):N("v-if",!0),t(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:Ce,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:t}){const{elDropdown:n}=xe(),r=x(),{onItemEnter:a,onItemLeave:i}=l(Fe,void 0),s=w(e=>(o("pointermove",e),e.defaultPrevented),U(o=>{if(e.disabled)return void i(o);const t=o.currentTarget;t===document.activeElement||t.contains(document.activeElement)||(a(o),o.defaultPrevented||null==t||t.focus({preventScroll:!0}))})),d=w(e=>(o("pointerleave",e),e.defaultPrevented),U(i));return{handleClick:w(t=>{if(!e.disabled)return o("click",t),"keydown"!==t.type&&t.defaultPrevented},o=>{var t,l,a;e.disabled?o.stopImmediatePropagation():((null==(t=null==n?void 0:n.hideOnClick)?void 0:t.value)&&(null==(l=n.handleClick)||l.call(n)),null==(a=n.commandHandler)||a.call(n,e.command,r,o))}),handlePointerMove:s,handlePointerLeave:d,propsAndAttrs:f(()=>({...e,...t}))}}}),[["render",function(e,o,n,r,l,a){const i=y("el-dropdown-item-impl"),s=y("el-roving-focus-item");return I(),E(s,{focusable:!e.disabled},{default:C(()=>[S(i,$(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:C(()=>[t(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","dropdown-item.vue"]]);var Ke=e(o({name:"ElDropdownMenu",props:Se,setup(e){const o=O("dropdown"),{_elDropdownSize:t}=xe(),n=t.value,{contentRef:r,role:a,triggerId:i,isUsingKeyboard:s,handleClose:d}=l(Fe,void 0),{rovingFocusGroupRef:u,rovingFocusGroupRootStyle:m,onBlur:v,onFocus:g,onKeydown:b,onMousedown:h}=l(pe,void 0),{collectionRef:y}=l(ue,void 0),I=f(()=>[o.b("menu"),o.bm("menu",null==n?void 0:n.value)]),E=ne(r,u,y),C=w(o=>{var t;null==(t=e.onKeydown)||t.call(e,o)},e=>{const{currentTarget:o,target:t}=e,n=c(e);if(o.contains(t),p.tab===n)return d();b(e)});return{size:n,rovingFocusGroupRootStyle:m,dropdownKls:I,role:a,triggerId:i,dropdownListWrapperRef:E,handleKeydown:C,onBlur:v,handleFocus:function(e){s.value&&g(e)},onMousedown:h}}}),[["render",function(e,o,n,r,l,a){return I(),D("ul",{ref:e.dropdownListWrapperRef,class:z(e.dropdownKls),style:Y(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:j(e.handleKeydown,["self"]),onMousedown:j(e.onMousedown,["self"])},[t(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const Me=W(Re,{DropdownItem:Oe,DropdownMenu:Ke}),Pe=q(Oe),Ae=q(Ke);export{Me as E,Pe as a,Ae as b};
